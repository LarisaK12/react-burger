{"version":3,"sources":["components/modal-overlay/modal-overlay.module.css","components/burger-element/burger-element.module.css","components/submit-order/submit-order.module.css","components/order-details/order-details.module.css","components/burger-ingredients/burger-ingredients.module.css","components/burger-ingredients-tab/burger-ingredients-tab.module.css","components/profile-orders-data/profile-orders-data.module.css","pages/profile.module.css","pages/login.module.css","utils/hooks.ts","utils/burger-constants.tsx","utils/utils.tsx","services/actions/profile.tsx","services/actions/ingredients.tsx","components/protected-route/protected-route.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","images/close.png","services/actions/burger-constructor.tsx","components/burger-element/burger-element.tsx","components/submit-order/submit-order.tsx","images/done.gif","components/order-details/order-details.tsx","services/actions/order-details.tsx","services/actions/error.tsx","components/burger-constructor/burger-constructor.tsx","components/burger-ingredient-card/burger-ingredient-card.tsx","services/actions/tab.tsx","components/burger-ingredients-tab/burger-ingredients-tab.tsx","components/burger-ingredients/burger-ingredients.tsx","pages/constructor.tsx","services/actions/login.tsx","components/awaiter/awaiter.tsx","pages/login.tsx","pages/page404.tsx","pages/register.tsx","pages/forgot-password.tsx","pages/reset-password.tsx","components/profile-data/profile-data.tsx","components/orders-info/ingredient-row/ingredient-row.tsx","components/orders-info/order-card/order-card.tsx","components/profile-orders-data/profile-orders-data.tsx","services/actions/ws.tsx","pages/profile.tsx","components/ingredient-details/ingredient-details.tsx","services/actions/ingredient-details.tsx","pages/ingredient-details.tsx","components/orders-info/order-ingredients-list/order-ingredients-list.tsx","components/orders-info/order-details-extended/order-details-extended.tsx","pages/order-details.tsx","components/orders-info/orders-ready/orders-ready.tsx","components/orders-info/order-lists/order-lists.tsx","pages/feed.tsx","components/app-header/app-header-item.tsx","components/app-header/app-header.tsx","components/modal-switch/modal-switch.tsx","components/app/app.tsx","reportWebVitals.ts","services/reducers/burger-constructor.tsx","services/reducers/ingredients.tsx","services/reducers/error.tsx","services/reducers/order-details.tsx","services/reducers/ingredient-details.tsx","services/reducers/tab.tsx","services/reducers/profile.tsx","services/reducers/login.tsx","services/reducers/ws.tsx","services/reducers/index.tsx","services/store.tsx","services/middleware/socketMiddleware.ts","index.tsx","components/profile-data/profile-data.module.css","components/ingredient-details/ingredient-details.module.css","components/app-header/app-header.module.css","components/burger-ingredient-card/burger-ingredient-card.module.css","pages/reset-password.module.css","pages/forgot-password.module.css","components/orders-info/ingredient-row/ingredient-row.module.css","components/orders-info/order-card/order-card.module.css","components/orders-info/order-details-extended/order-details-extended.module.css","components/orders-info/order-ingredients-list/order-ingredients-list.module.css","pages/feed.module.css","components/modal/modal.module.css","pages/constructor.module.css","pages/page404.module.css","pages/order-details.module.css","components/orders-info/order-lists/order-lists.module.css","components/burger-constructor/burger-constructor.module.css","components/awaiter/awaiter.module.css","pages/ingredient-details.module.css"],"names":["module","exports","useDispatch","dispatchHook","useSelector","selectorHook","GET_ORDER_ID_URL","API_URL","WS_URL","USER_URL","HOME_PAGE","checkResponse","res","ok","json","Promise","reject","status","fetchData","url","method","data","fetch","headers","body","then","fetchWithToken","getToken","Authorization","getCookie","fetchWithRefresh","refreshToken","catch","e","JSON","stringify","token","resolve","success","aToken","accessToken","split","setCookie","expires","message","deleteCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","value","props","exp","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","dateToString","dtime","dt","day","getFullYear","getMonth","getDay","toLocaleTimeString","toString","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILED","SET_USER_REQUEST","SET_USER_SUCCESS","SET_USER_FAILED","REG_USER_REQUEST","REG_USER_SUCCESS","REG_USER_FAILED","FORGOT_PASS_REQUEST","FORGOT_PASS_SUCCESS","FORGOT_PASS_FAILED","RESET_PASS_REQUEST","RESET_PASS_SUCCESS","RESET_PASS_FAILED","resetPassResult","isSuccess","type","forgotPasswordResult","setUserResult","user","getUserResult","regUserResult","register","dispatch","getUser","indexOf","setUser","forgotPassword","resetPassword","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","getIngredientsFailed","getIngredients","ingredients","ProtectedRoute","store","profile","render","children","to","pathname","ModalOverlay","id","className","styles","background","onClick","onClose","Modal","header","modalRoot","getElementById","onKeydown","key","React","useEffect","addEventListener","removeEventListener","ReactDOM","createPortal","modal","stopPropagation","img","src","alt","ADD_INGREDIENT","REMOVE_INGREDIENT","MOVE_INGREDIENT","CLEAR_INGREDIENTS","BurgerElement","ref","useRef","useDrop","accept","hover","item","monitor","current","dragIndex","index","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","clientOffset","getClientOffset","hoverClientY","y","oldPlace","newPlace","dropRef","useDrag","_id","dragRef","element","isLocked","handleClose","place","memo","SubmitOrder","price","constructor","onSubmit","submit","size","OrderDetails","orderId","order","flexcol","DoneGif","SUBMIT_ORDER_REQUEST","SUBMIT_ORDER_SUCCESS","SUBMIT_ORDER_FAILED","GET_ORDER_REQUEST","GET_ORDER_SUCCESS","GET_ORDER_FAILED","RESET_ORDER","submitOrderResult","getOrderResult","submitOrder","number","getOrder","orders","length","SET_ERROR","CLEAR_ERROR","setError","errorText","error","clearError","BurgerConstructor","history","useHistory","burger","submitOrderFailed","useMemo","filter","b","middleIngredients","ingr","drop","ingredient","dropTarget","Boolean","scrollable","map","Fragment","preventDefault","i","BurgerIngredientCard","counter","collect","isDrag","isDragging","preview","location","useLocation","state","link","DragPreviewImage","connect","image","ingredient_card","count","price_div","item_center","SET_TAB","SET_RATIO","BurgerIngredientsTab","useInView","threshold","inView","entry","filteredIngredients","ratio","intersectionRatio","title","ingretients_tab","BurgerIngredients","ingredientsRequest","ingredientsFailed","tab","tabs","scrollIntoView","setActiveTab","style","display","active","ConstructorPage","dispatcher","main","DndProvider","backend","HTML5Backend","section","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILED","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILED","loginFailed","logoutSucccess","logoutFailed","login","logout","Awaiter","inner","LoginPage","useState","emailValue","setEmailValue","passValue","setPassValue","loginRequestFailed","profileRequest","from","email","password","onChange","target","Code404Page","RegisterPage","nameValue","setNameValue","regRequestFailed","regRequest","placeholder","ForgotPasswordPage","profileRequestFailed","passwordResetRequired","loggedIn","ResetPasswordPage","setValue","passwordReseted","ProfileData","setProfileRequest","setProfileRequestFailed","icon","IngredientRow","selectedIngreients","si","forEach","find","push","reduce","s","img_container","padding","margin","OrderCard","card","row","createdAt","green","ProfileOrdersData","ws","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","WS_CLOSE_CONNECTION","startConnection","wsUrl","payload","closeConnection","ProfilePage","divLink","alink","IngredientDetails","details_card","image_large","details","details_part","calories","proteins","fat","carbohydrates","SET_CURRENT_INGREDIENT","CLEAR_CURRENT_INGREDIENT","IngredientDetailsPage","useParams","currentIngredient","OrderIngredientsList","some","c","findIndex","cnt","container","OrderDetailsExtended","horizontal","OrderDetailsPage","getOrderRequest","getOrderFailed","Number","window","OrdersReady","quantity","OrderLists","readyOrders","arr","chunkSize","R","slice","splitArray","ready","number_container","index2","whiteSpace","waiting","FeedPage","total","totalToday","ord","waitingOrders","HeaderItem","nav","text","AppHeader","currentPage","setCurrentPage","setConstructor","useCallback","setOrders","setProfile","logo","ModalSwitch","closeModal","goBack","path","exact","App","forgotPassRequest","resetPassRequest","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","InitialState","submitOrderRequest","resetPassRequestFailed","forgotPassRequestFailed","loginRequest","logoutRequest","logoutRequestFailed","isConnected","rootReducer","combineReducers","action","hasBun","burgerIngredients","splice","thumbnail","placeOfBottomBun","newburger","newprice","anewburger","deleted","t","newTabs","newCurrent","prev","next","timeStamp","enhancer","composeWithDevTools","applyMiddleware","thunk","socket","WebSocket","close","onopen","event","onerror","onmessage","msg","answer","parse","getMessage","onclose","createStore","StrictMode"],"mappings":"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","file":"static/js/main.e81f76a3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"background\":\"modal-overlay_background__2v-BB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"element\":\"burger-element_element__2_28Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"submit\":\"submit-order_submit__1muw6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flexcol\":\"order-details_flexcol__2bO_L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainDiv\":\"burger-ingredients_mainDiv__1neh3\",\"ingredients\":\"burger-ingredients_ingredients__3J_i0\",\"item_center\":\"burger-ingredients_item_center__kK8By\",\"alink\":\"burger-ingredients_alink__31H-F\",\"avisited\":\"burger-ingredients_avisited__2i3Df\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingretients_tab\":\"burger-ingredients-tab_ingretients_tab__21fm4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrollable\":\"profile-orders-data_scrollable__3YFOL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile_main__6FTel\",\"section\":\"profile_section__3dYQV\",\"divLink\":\"profile_divLink__SJzUg\",\"alink\":\"profile_alink__27ZpJ\",\"link\":\"profile_link__wGb0z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"login_main__19egb\",\"inner\":\"login_inner__2ySqU\",\"item\":\"login_item__lL2u-\"};","import {\r\n    TypedUseSelectorHook,\r\n    useDispatch as dispatchHook,\r\n    useSelector as selectorHook\r\n  } from 'react-redux';\r\n  import { AppDispatch, RootState, AppThunk } from './types';\r\n  \r\n  export const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\r\n  export const useSelector: TypedUseSelectorHook<RootState> = selectorHook;","const INGREDIENTS_URL = \"/ingredients\";\r\nconst GET_ORDER_ID_URL = \"/orders\";\r\nconst API_URL = \"https://norma.nomoreparties.space/api\";\r\nconst WS_URL = \"wss://norma.nomoreparties.space\";\r\nconst LOGIN_URL = \"/auth/login\";\r\nconst REGISTER_URL = \"/auth/register \";\r\nconst LOGOUT_URL = \"/auth/logout\";\r\nconst TOKEN_URL = \"/auth/token\";\r\nconst USER_URL = \"/auth/user\";\r\nconst FORGOT_PASSWORD_URL = \"/password-reset\";\r\nconst RESET_PASSWORD_URL = \"/password-reset/reset\";\r\nconst ORDERS_ALL_URL = \"/orders/all\";\r\nconst USER_ORDERS_URL = \"/orders\";\r\nconst HOME_PAGE =\"/react-burger\";\r\nexport {\r\n  INGREDIENTS_URL,\r\n  GET_ORDER_ID_URL,\r\n  API_URL,\r\n  LOGIN_URL,\r\n  LOGOUT_URL,\r\n  REGISTER_URL,\r\n  TOKEN_URL,\r\n  USER_URL,\r\n  RESET_PASSWORD_URL,\r\n  FORGOT_PASSWORD_URL,\r\n  ORDERS_ALL_URL,\r\n  USER_ORDERS_URL,\r\n  WS_URL,\r\n  HOME_PAGE,\r\n};\r\n","import { API_URL, TOKEN_URL } from \"./burger-constants\";\r\nimport { TCookieProps } from \"./types\";\r\nexport const checkResponse = (res:Response) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка ${res.status}: ${res.json()}`);\r\n};\r\nexport const fetchData = (url:string, method:string, data?:string) => {\r\n  return fetch(url, {\r\n    method: method,\r\n    headers: {\r\n      \"Content-Type\": \"application/json;charset=utf-8\",\r\n    },\r\n    body: data,\r\n  }).then(checkResponse);\r\n};\r\nexport const fetchWithToken = (url:string, method:string, data?:string) => {\r\n return  getToken().then((res)=>{\r\n  return fetch(url, {\r\n    method: method,\r\n    headers: {\r\n      \"Content-Type\": \"application/json;charset=utf-8\",\r\n      Authorization: \"Bearer \" + getCookie(\"accessToken\"),\r\n    },\r\n    body: data,\r\n  }).then(checkResponse)\r\n})\r\n\r\n    \r\n};\r\nexport const fetchWithRefresh = (url:string, method:string, data?:string) => {\r\n  return refreshToken().then((res) => {\r\n    return fetchWithToken(url, method, data);\r\n  })\r\n  .catch(e=>{\r\n    return Promise.reject(e);\r\n  });\r\n    \r\n};\r\n// запрашивает новый access токен\r\nexport const refreshToken = () => {\r\n  if (!getCookie(\"refreshToken\")) {\r\n    return Promise.reject(`Ошибка: токена нет`);}\r\n  else\r\n    return fetch(`${API_URL}${TOKEN_URL}`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json;charset=utf-8\",\r\n      },\r\n      body: JSON.stringify({ token: getCookie(\"refreshToken\") }),\r\n    }).then(checkResponse);\r\n};\r\n//отдает токен доступа, если его нет, то пытается достать новый (используя refresh токен), если неудчно - удаляет refresh токен\r\nexport const getToken =()=>{\r\n  return new Promise<string>((resolve,reject)=>{\r\n  var token = getCookie(\"accessToken\");\r\n  if(!token){\r\n    refreshToken().then((res) => {\r\n      if (res && res.success) {\r\n        let aToken = res.accessToken.split(\"Bearer \")[1];\r\n        setCookie(\"accessToken\", aToken, { expires: 1200 });\r\n        setCookie(\"refreshToken\", res.refreshToken, {expires:\"never\"});\r\n        resolve(aToken);\r\n      }\r\n      reject(`Ошибка: ${res.message}`);      \r\n    }      \r\n    ).catch((e)=>{ \r\n      deleteCookie(\"refreshToken\");\r\n      reject(e);\r\n    })   \r\n    \r\n  }\r\n  else resolve(token);\r\n}\r\n  )\r\n}\r\nexport function getCookie(name:string):string|undefined {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\r\n      \"(?:^|; )\" +\r\n      // eslint-disable-next-line no-useless-escape\r\n      name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\r\n        \"=([^;]*)\"\r\n    )\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport function setCookie(name:string, value:string|null, props?:TCookieProps) {\r\n  props = props || {};\r\n  let exp = props.expires;\r\n  if (typeof exp == \"number\" && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if ((exp as Date) && (exp as Date).toUTCString) {\r\n    props.expires = (exp as Date).toUTCString();\r\n  }\r\n  value = value?encodeURIComponent(value as string):'';\r\n  let updatedCookie = name + \"=\" + value;\r\n  updatedCookie +=\";expires=\"+props.expires;\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function deleteCookie(name:string) {\r\n  setCookie(name, null, { expires: -1 });\r\n}\r\n\r\nexport function dateToString(dtime:Date):string{\r\n  try{\r\n    var dt = new Date(dtime);\r\n    var day = dt.getFullYear()=== new Date().getFullYear() &&\r\n    dt.getMonth()=== new Date().getMonth() ? (dt.getDay() === new Date().getDay()?\"сегодня\":\r\n     new Date().getDay()-dt.getDay() === 1?\"вчера\":`${new Date().getDay()-dt.getDay()} дня назад`\r\n    ) :null;\r\n    if(day === null) day=`${dt.getFullYear()}-${dt.getMonth()}-${dt.getDay()}`;\r\n    return `${day}, ${dt.toLocaleTimeString()}`\r\n  \r\n  }catch(e){\r\n    return dtime.toString();\r\n  }\r\n    \r\n}\r\nexport const splitArray =(arr:ReadonlyArray<number>, chunkSize:number)=> {\r\n  var R = [];\r\n  for (var i = 0; i < arr.length; i += chunkSize)\r\n    R.push(arr.slice(i, i + chunkSize));\r\n  return R;\r\n}\r\n","import {\r\n  setCookie,\r\n  fetchWithRefresh,\r\n  fetchWithToken,\r\n  fetchData,\r\n} from \"../../utils/utils\";\r\nimport {\r\n  API_URL,\r\n  USER_URL,\r\n  REGISTER_URL,\r\n  FORGOT_PASSWORD_URL,\r\n  RESET_PASSWORD_URL,\r\n} from \"../../utils/burger-constants\";\r\nimport { AppThunk, TResetPassword, TUser } from \"../../utils/types\";\r\n\r\nexport const GET_USER_REQUEST = \"GET_USER_REQUEST\";\r\nexport const GET_USER_SUCCESS = \"GET_USER_SUCCESS\";\r\nexport const GET_USER_FAILED = \"GET_USER_FAILED\";\r\n\r\nexport const SET_USER_REQUEST = \"SET_USER_REQUEST\";\r\nexport const SET_USER_SUCCESS = \"SET_USER_SUCCESS\";\r\nexport const SET_USER_FAILED = \"SET_USER_FAILED\";\r\n\r\nexport const REG_USER_REQUEST = \"REG_USER_REQUEST\";\r\nexport const REG_USER_SUCCESS = \"REG_USER_SUCCESS\";\r\nexport const REG_USER_FAILED = \"REG_USER_FAILED\";\r\nexport const CLEAR_USER = \"CLEAR_USER\";\r\n\r\nexport const FORGOT_PASS_REQUEST = \"FORGOT_PASS_REQUEST\";\r\nexport const FORGOT_PASS_SUCCESS = \"FORGOT_PASS_SUCCESS\";\r\nexport const FORGOT_PASS_FAILED = \"FORGOT_PASS_FAILED\";\r\n\r\nexport const RESET_PASS_REQUEST = \"RESET_PASS_REQUEST\";\r\nexport const RESET_PASS_SUCCESS = \"RESET_PASS_SUCCESS\";\r\nexport const RESET_PASS_FAILED = \"RESET_PASS_FAILED\";\r\nexport interface IResetPassRequest{\r\n  readonly type: typeof RESET_PASS_REQUEST \r\n}\r\nexport interface IResetPassResult{\r\n  readonly type: typeof RESET_PASS_SUCCESS | typeof RESET_PASS_FAILED,\r\n  readonly message?:string \r\n}\r\nexport interface IForgotPassRequest{\r\n  readonly type: typeof FORGOT_PASS_REQUEST \r\n}\r\nexport interface IForgotPassResult{\r\n  readonly type: typeof FORGOT_PASS_FAILED | typeof FORGOT_PASS_SUCCESS,\r\n  readonly message?:string\r\n}\r\nexport interface ISetUserRequest{\r\n  readonly type:typeof SET_USER_REQUEST\r\n}\r\nexport interface ISetUserResult{\r\n  readonly type:typeof SET_USER_FAILED | typeof SET_USER_SUCCESS,\r\n  readonly user?:TUser\r\n}\r\nexport interface IGetUserRequest{\r\n  readonly type:typeof GET_USER_REQUEST\r\n}\r\nexport interface IGetUserResult{\r\n  readonly type:typeof GET_USER_FAILED | typeof GET_USER_SUCCESS,\r\n  readonly user?:TUser\r\n}\r\nexport interface IRegUserRequest{\r\n  readonly type:typeof REG_USER_REQUEST\r\n}\r\nexport interface IRegUserResult{\r\n  readonly type:typeof REG_USER_FAILED | typeof REG_USER_SUCCESS,\r\n  readonly user?:TUser|null\r\n}\r\n\r\nexport type TProfileActions = IResetPassRequest | IResetPassResult |IForgotPassRequest |IForgotPassResult\r\n|ISetUserRequest | ISetUserResult | IGetUserRequest | IGetUserResult | IRegUserRequest | IRegUserResult\r\nexport const resetPassRequest=():IResetPassRequest=>{\r\n  return {\r\n    type:RESET_PASS_REQUEST\r\n  }\r\n}\r\nexport const resetPassResult=(isSuccess:boolean, message?:string):IResetPassResult=>{\r\n  return {\r\n    type:isSuccess? RESET_PASS_SUCCESS: RESET_PASS_FAILED,\r\n    message\r\n  }\r\n}\r\nexport const forgotPasswordRequest =():IForgotPassRequest=>{\r\n  return{\r\n    type:FORGOT_PASS_REQUEST\r\n  }\r\n}\r\nexport const forgotPasswordResult =(isSuccess:boolean, message?:string):IForgotPassResult=>{\r\n  return{\r\n    type: isSuccess? FORGOT_PASS_SUCCESS: FORGOT_PASS_FAILED,\r\n    message\r\n  }\r\n}\r\nexport const setUserRequest=():ISetUserRequest=>{\r\n  return {\r\n    type: SET_USER_REQUEST\r\n  }\r\n}\r\nexport const setUserResult = (isSuccess:boolean, user?:TUser):ISetUserResult=>{\r\n  return{\r\n    type:  isSuccess? SET_USER_SUCCESS: SET_USER_FAILED,\r\n    user\r\n  }\r\n}\r\nexport const getUserRequest=():IGetUserRequest=>{\r\n  return {\r\n    type: GET_USER_REQUEST\r\n  }\r\n}\r\nexport const getUserResult = (isSuccess:boolean, user?:TUser):IGetUserResult=>{\r\n  return{\r\n    type:  isSuccess? GET_USER_SUCCESS: GET_USER_FAILED,\r\n    user\r\n  }\r\n}\r\nexport const regUserRequest=():IRegUserRequest=>{\r\n  return {\r\n    type: REG_USER_REQUEST\r\n  }\r\n}\r\nexport const regUserResult = (isSuccess:boolean, user?:TUser|null):IRegUserResult=>{\r\n  return{\r\n    type:  isSuccess? REG_USER_SUCCESS: REG_USER_FAILED,\r\n    user\r\n  }\r\n}\r\n\r\nexport function register(data:TUser) {\r\n  return function (dispatch:AppThunk) {\r\n    dispatch(regUserRequest());\r\n    fetchData(`${API_URL}${REGISTER_URL}`, \"POST\", JSON.stringify(data))\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          let aToken = res.accessToken.split(\"Bearer \")[1];\r\n          setCookie(\"accessToken\", aToken, { expires: 1200 });\r\n          setCookie(\"refreshToken\", res.refreshToken);\r\n          dispatch(regUserResult(true,res.user));\r\n        } else {\r\n          dispatch(regUserResult(false));\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        dispatch(regUserResult(false));\r\n      });\r\n  };\r\n}\r\n\r\nexport function getUser() {\r\n  return function (dispatch:AppThunk) {\r\n    dispatch(getUserRequest());\r\n    \r\n    fetchWithToken(`${API_URL}${USER_URL}`, \"GET\")\r\n        .then((res) => {\r\n          if (res && res.success) {\r\n            dispatch(getUserResult(true,res.user));\r\n          } else {\r\n            dispatch(getUserResult(false));\r\n            \r\n          }\r\n        })\r\n        .catch((e) => {\r\n          \r\n          if (\r\n            ((e.indexOf(\"expired\") > 0 || e.indexOf(\"invalid\") > 0) &&\r\n              e.indexOf(\"token\") > 0) ||\r\n            e.indexOf(\"403\")\r\n          )\r\n          {\r\n          \r\n            fetchWithRefresh(`${API_URL}${USER_URL}`, \"GET\")\r\n              .then((res) => {\r\n                if (res && res.success) {\r\n                  dispatch(getUserResult(true,res.user));\r\n                } else {\r\n                  dispatch(getUserResult(false));\r\n                }\r\n              })\r\n              .catch((e) => {\r\n                dispatch(getUserResult(false));\r\n              });\r\n            }\r\n          else{\r\n          dispatch(getUserResult(false));\r\n        \r\n        }\r\n        });\r\n  };\r\n}\r\n\r\nexport function setUser(data:TUser) {\r\n  return function (dispatch:AppThunk) {\r\n    dispatch(setUserRequest());\r\n    fetchWithToken(`${API_URL}${USER_URL}`, \"PATCH\", JSON.stringify(data))\r\n        .then((res) => {\r\n          if (res && res.success) {\r\n            dispatch(setUserResult(true, res.user));\r\n          } else {\r\n            dispatch(setUserResult(false));\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          if (\r\n            (e.indexOf(\"expired\") > 0 || e.indexOf(\"invalid\") > 0) &&\r\n            e.indexOf(\"token\") > 0\r\n          )\r\n            fetchWithRefresh(\r\n              `${API_URL}${USER_URL}`,\r\n              \"PATCH\",\r\n              JSON.stringify(data)\r\n            )\r\n              .then((res) => {\r\n                if (res && res.success) {\r\n                  dispatch(setUserResult(true, res.user));\r\n                } else {\r\n                  dispatch(setUserResult(false));\r\n                }\r\n              })\r\n              .catch((e) => {\r\n                dispatch(setUserResult(false));\r\n              });\r\n          else\r\n            dispatch(setUserResult(false));\r\n        });\r\n  };\r\n}\r\n\r\nexport function forgotPassword(data:TUser) {\r\n  return function (dispatch:AppThunk) {\r\n    dispatch(forgotPasswordRequest());\r\n    fetchData(`${API_URL}${FORGOT_PASSWORD_URL}`, \"POST\", JSON.stringify(data))\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch(forgotPasswordResult(true,res.message));\r\n        } else {\r\n          dispatch(forgotPasswordResult(false));\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        dispatch(forgotPasswordResult(false));\r\n      });\r\n  };\r\n}\r\nexport function resetPassword(data:TResetPassword) {\r\n  return function (dispatch:AppThunk) {\r\n    dispatch(resetPassRequest());\r\n    fetchData(`${API_URL}${RESET_PASSWORD_URL}`, \"POST\", JSON.stringify(data))\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch(resetPassResult(true,res.message));\r\n        } else {\r\n          dispatch(resetPassResult(false));\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        dispatch(resetPassResult(false,e));\r\n      });\r\n  };\r\n}\r\n","import { API_URL, INGREDIENTS_URL } from \"../../utils/burger-constants\";\r\nimport { AppThunk, TIngredient } from \"../../utils/types\";\r\nimport { checkResponse } from \"../../utils/utils\";\r\nexport const GET_INGREDIENTS_REQUEST = \"GET_INGREDIENTS_REQUEST\";\r\nexport const GET_INGREDIENTS_SUCCESS = \"GET_INGREDIENTS_SUCCESS\";\r\nexport const GET_INGREDIENTS_FAILED = \"GET_INGREDIENTS_FAILED\";\r\nexport interface IGetIngredientsRequest{\r\n  readonly type: typeof GET_INGREDIENTS_REQUEST\r\n}\r\nexport interface IGetIngredientsSuccess{\r\n  readonly type: typeof GET_INGREDIENTS_SUCCESS\r\n  readonly ingredients:ReadonlyArray<TIngredient>\r\n}\r\nexport interface IGetIngredientsFailed{\r\n  readonly type: typeof GET_INGREDIENTS_FAILED\r\n}\r\nexport type TIngredientActions= IGetIngredientsFailed|IGetIngredientsRequest|IGetIngredientsSuccess\r\nexport const getIngredientsRequest =():IGetIngredientsRequest=>{\r\n  return{\r\n    type: GET_INGREDIENTS_REQUEST\r\n  }\r\n}\r\nexport const getIngredientsSuccess =(ingredients:ReadonlyArray<TIngredient>):IGetIngredientsSuccess=>{\r\n  return{\r\n    type: GET_INGREDIENTS_SUCCESS,\r\n    ingredients\r\n  }\r\n}\r\nexport const getIngredientsFailed =():IGetIngredientsFailed=>{\r\n  return{\r\n    type: GET_INGREDIENTS_FAILED\r\n  }\r\n}\r\nexport function getIngredients() {\r\n  return function (dispatch:AppThunk) {\r\n    dispatch(getIngredientsRequest());\r\n    fetch(`${API_URL}${INGREDIENTS_URL}`)\r\n      .then(checkResponse)\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch( getIngredientsSuccess( res.data ));\r\n        } else {\r\n          dispatch(getIngredientsFailed());\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        dispatch(getIngredientsFailed());\r\n      });\r\n  };\r\n}\r\n","import { Redirect, Route } from \"react-router-dom\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\nimport React from \"react\";\r\ntype TRouteProps ={\r\n  path:string,\r\n  exact?:boolean\r\n}\r\nexport const ProtectedRoute :React.FC<TRouteProps>=(props)=> {\r\n  const { user } = useSelector((store) => store.profile);\r\n\r\n  return (\r\n    <Route\r\n      {...props}\r\n      render={() =>\r\n        user? (\r\n          props.children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport styles from './modal-overlay.module.css'\r\nimport { TModalProps } from '../../utils/types';\r\n\r\nconst  ModalOverlay:React.FC<TModalProps> = (props) => {\r\n    return(\r\n        <div id=\"modalOverlay\" className={styles.background} onClick={props.onClose}>{props.children}</div>\r\n    )\r\n}\r\n  \r\nexport default ModalOverlay;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport styles from './modal.module.css';\r\nimport CloseImg from '../../images/close.png'\r\nimport ModalOverlay from '../modal-overlay/modal-overlay';\r\nimport { TModalProps } from '../../utils/types';\r\nconst  Modal:React.FC<TModalProps> = (props) => {\r\n  const { children, header, onClose } = props;\r\n  const modalRoot:Element|null = document.getElementById(\"react-modals\");\r\n  const onKeydown = ({ key }:{key:string}) => {\r\n    if(key ==='Escape') onClose()\r\n  }\r\n  React.useEffect(() => {\r\n    document.addEventListener('keydown', onKeydown);\r\n    return () => document.removeEventListener('keydown', onKeydown);\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  },[]);\r\n  return (modalRoot?ReactDOM.createPortal(\r\n      <ModalOverlay onClose={onClose}>\r\n        <div className={`pl-10 pt-10 pr-10 pb-15 ${styles.modal}`} onClick={e=>e.stopPropagation()}>\r\n        <div className={styles.header}>\r\n          <span className=\"text text_type_main-large\">{header}</span>\r\n          <img className={`${styles.img} ml-2`} onClick={onClose}  src={CloseImg} alt=\"закрыть\" id=\"closeButton\"/>\r\n        </div>\r\n        {children}          \r\n        </div>\r\n      </ModalOverlay>,\r\n      modalRoot\r\n    )\r\n    : null\r\n  )  \r\n} \r\nexport default Modal","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGOSURBVDhPjZQ7SwNBFIVnLQUToxgbcTXYqJ0vBMFCUgpCCsE/ZytiY61gkYCJTzAiJK2dik1WEAuJ39nMxMTMxj3w7Z2dc+dmMnPZoNWKysaYSdjOZMbeianF2jnCEQQjPKZhCcoYOWIqkTtLOIZNGFWhIjyCil3ZhKEip0A4gQ2owQHIaI1jNqBt40RseISXh6rNrYM28CuK5Zi8tQlPEFqrK+YKcGlztPt5a/UriqIspivW4F2XEIv3EFwRxSlrxQps7IrFM+22OWW4Ctewr3l0CDug8yxyw6+adBooJOnMsM4YrkMTvkFnUYU9irwR++QtJOnMsCsMlzsz5gZ2/+7ESdefoCDL46szjpULgnhnXnkLcZCu2VZAf+0ZFji7Cp63NQYKkdjbbDqTEjvZItZhEWr2h5JFgprNXXFfs6VuWgw1m+tYb7P927SaAFdkoNl6ldi0vKjIhTX0d/KxMURqWvJcMe0+1PfoDk+3k9hsPrFOnxw17Ro8qNA9g08oUeSFmFqs1YGfG2M+fgC8eU0dXTzbVAAAAABJRU5ErkJggg==\"","import { TIngredient } from \"../../utils/types\";\r\n\r\nexport const ADD_INGREDIENT: \"ADD_INGREDIENT\" = \"ADD_INGREDIENT\";\r\nexport const REMOVE_INGREDIENT: \"REMOVE_INGREDIENT\" = \"REMOVE_INGREDIENT\";\r\nexport const MOVE_INGREDIENT: \"MOVE_INGREDIENT\" = \"MOVE_INGREDIENT\";\r\nexport const CLEAR_INGREDIENTS: \"CLEAR_INGREDIENTS\" = \"CLEAR_INGREDIENTS\";\r\nexport interface IAddIngredient{\r\n    readonly type:typeof ADD_INGREDIENT,\r\n    readonly item:TIngredient\r\n}\r\nexport interface IClearIngredients{\r\n    readonly type : typeof CLEAR_INGREDIENTS\r\n}\r\nexport interface IRemoveIngredient{\r\n    readonly type : typeof REMOVE_INGREDIENT,\r\n    readonly place:number\r\n}\r\nexport interface IMoveIngredient{\r\n    readonly type : typeof MOVE_INGREDIENT,\r\n    readonly oldPlace:number,\r\n    readonly newPlace:number,\r\n}\r\nexport type TBurgerIngredientActions= IAddIngredient|IClearIngredients|IRemoveIngredient|IMoveIngredient\r\nexport const addIngredient=(ingredient:TIngredient):IAddIngredient=>{\r\n    return{\r\n        type:ADD_INGREDIENT,\r\n        item:ingredient\r\n    }\r\n}\r\nexport const clearIngredients=():IClearIngredients=>{\r\n    return {\r\n        type:CLEAR_INGREDIENTS\r\n    }\r\n}\r\nexport const removeIngredient=(place:number):IRemoveIngredient=>{\r\n    return{\r\n        type: REMOVE_INGREDIENT,\r\n        place:place\r\n    }\r\n}\r\nexport const moveIngredient =(oldPlace:number, newPlace:number):IMoveIngredient=>{\r\n    return{\r\n        type:MOVE_INGREDIENT,\r\n        oldPlace:oldPlace,\r\n        newPlace:newPlace\r\n    }\r\n}","import React from \"react\";\r\nimport styles from \"./burger-element.module.css\";\r\nimport { DragIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { ConstructorElement } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {\r\n  removeIngredient,\r\n  moveIngredient,\r\n} from \"../../services/actions/burger-constructor\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {  DropTargetMonitor, useDrag, useDrop } from \"react-dnd\";\r\nimport {TAddedIngredient, TDraggingElement} from \"../../utils/types\";\r\nconst BurgerElement : React.FC<TAddedIngredient>=(props)=> {\r\n  const dispatch = useDispatch();\r\n  const deleteIngredient = () => {\r\n    dispatch(removeIngredient( props.place ));\r\n  };\r\n  const ref = React.useRef<HTMLSpanElement>(null);\r\n  const [, dropRef] = useDrop({\r\n    accept: \"moving\",\r\n    hover(item:TDraggingElement, monitor:DropTargetMonitor<TDraggingElement,unknown>) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex = item.index;\r\n      const hoverIndex = props.index?props.index:0;\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      const clientOffset = monitor.getClientOffset();\r\n      if(clientOffset === null) return;\r\n      const hoverClientY =  clientOffset.y - hoverBoundingRect.top;\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n      dispatch(moveIngredient( dragIndex, hoverIndex ));\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n  const [, dragRef] = useDrag({\r\n    type: \"moving\",\r\n    item: ():TDraggingElement => {\r\n      return { id: props._id, index: props.index?props.index:0 };\r\n    },\r\n  });\r\n  dropRef(dragRef(ref));\r\n\r\n  return (\r\n    <span className={styles.element} ref={ref}>\r\n      {props.isLocked ? (\r\n        <span className=\"pr-8\" />\r\n      ) : (\r\n        <>\r\n          <DragIcon type=\"primary\"/>\r\n          <span className=\"pr-1\"></span>\r\n        </>\r\n      )}\r\n\r\n      <ConstructorElement {...props} handleClose={deleteIngredient} />\r\n    </span>\r\n  );\r\n}\r\n\r\nexport default React.memo(BurgerElement);\r\n","import React from \"react\";\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"./submit-order.module.css\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\ntype TSubmitOrderProps={\r\n  onClick : (e:React.SyntheticEvent)=>void\r\n}\r\nconst SubmitOrder:React.FC<TSubmitOrderProps> = (props) => {\r\n  const { price } = useSelector((store) => store.constructor);\r\n  return (\r\n    <form onSubmit={props.onClick}>\r\n      <span className={styles.submit}>\r\n        <p className=\"text text_type_digits-medium mr-2\">{price ? price : 0}</p>\r\n        <CurrencyIcon type=\"primary\" />\r\n        <span className=\"pl-10\" />\r\n        <Button type=\"primary\" size=\"medium\">\r\n          Оформить заказ\r\n        </Button>\r\n      </span>\r\n    </form>\r\n  );\r\n}\r\nexport default SubmitOrder;\r\n","export default __webpack_public_path__ + \"static/media/done.cc5a59a7.gif\";","import styles from \"./order-details.module.css\";\r\nimport DoneGif from \"../../images/done.gif\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nfunction OrderDetails() {\r\n  const { orderId } = useSelector((store) => store.order);\r\n  return (\r\n    <div className={`${styles.flexcol}`}>\r\n      <p className=\"text text_type_digits-medium\">{orderId}</p>\r\n      <p className=\"text text_type_main-medium pt-8\">идентификатор заказа</p>\r\n      <img\r\n        src={DoneGif}\r\n        className=\"pt-15 pb-15\"\r\n        alt=\"ваш заказ начали готовить\"\r\n      ></img>\r\n      <p className=\"text text_type_main-small pb-2\">\r\n        ваш заказ начали готовить\r\n      </p>\r\n      <p className=\"text text_type_main-small text_color_inactive\">\r\n        дождитесь готовности на орбитальной станции\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\nexport default OrderDetails;\r\n","import { API_URL, GET_ORDER_ID_URL } from \"../../utils/burger-constants\";\r\nimport { AppThunk, TOrder, TOrderShortDetails } from \"../../utils/types\";\r\nimport { fetchData, fetchWithToken, fetchWithRefresh } from \"../../utils/utils\";\r\nexport const SUBMIT_ORDER_REQUEST:\"SUBMIT_ORDER_REQUEST\" = \"SUBMIT_ORDER_REQUEST\";\r\nexport const SUBMIT_ORDER_SUCCESS:\"SUBMIT_ORDER_SUCCESS\" = \"SUBMIT_ORDER_SUCCESS\";\r\nexport const SUBMIT_ORDER_FAILED:\"SUBMIT_ORDER_FAILED\" = \"SUBMIT_ORDER_FAILED\";\r\nexport const GET_ORDER_REQUEST:\"GET_ORDER_REQUEST\" = \"GET_ORDER_REQUEST\";\r\nexport const GET_ORDER_SUCCESS:\"GET_ORDER_SUCCESS\" = \"GET_ORDER_SUCCESS\";\r\nexport const GET_ORDER_FAILED:\"GET_ORDER_FAILED\" = \"GET_ORDER_FAILED\";\r\nexport const RESET_ORDER:\"RESET_ORDER\" = \"RESET_ORDER\";\r\nexport interface ISubmitOrderRequest{\r\n  readonly type: typeof SUBMIT_ORDER_REQUEST\r\n}\r\nexport interface ISubmitOrderResult{\r\n  readonly type: typeof SUBMIT_ORDER_SUCCESS | typeof SUBMIT_ORDER_FAILED,\r\n  readonly order?:TOrderShortDetails\r\n}\r\nexport interface IResetOrder{\r\n  readonly type:typeof RESET_ORDER\r\n}\r\nexport interface IGetOrderRequest{\r\n  readonly type: typeof GET_ORDER_REQUEST\r\n}\r\nexport interface IGetOrderResult{\r\n  readonly type: typeof GET_ORDER_SUCCESS | typeof GET_ORDER_FAILED,\r\n  readonly order?:TOrder\r\n}\r\nexport type TOrderActions = ISubmitOrderRequest | ISubmitOrderResult | IResetOrder | IGetOrderRequest | IGetOrderResult\r\nexport const submitOrderRequest=():ISubmitOrderRequest=>{\r\n  return {\r\n    type:SUBMIT_ORDER_REQUEST\r\n  }\r\n}\r\nexport const submitOrderResult=(isSuccess:boolean,order?:TOrderShortDetails):ISubmitOrderResult=>{\r\n  return {\r\n    type: isSuccess? SUBMIT_ORDER_SUCCESS : SUBMIT_ORDER_FAILED,\r\n    order\r\n  }\r\n}\r\nexport const resetOrder = ():IResetOrder=>{\r\n  return {\r\n    type: RESET_ORDER\r\n  }\r\n}\r\nexport const getOrderRequest=():IGetOrderRequest=>{\r\n  return {\r\n    type:GET_ORDER_REQUEST\r\n  }\r\n}\r\nexport const getOrderResult=(isSuccess:boolean,order?:TOrder):IGetOrderResult=>{\r\n  return {\r\n    type: isSuccess? GET_ORDER_SUCCESS : GET_ORDER_FAILED,\r\n    order\r\n  }\r\n}\r\nexport function submitOrder(data:ReadonlyArray<string>) {\r\n  return function (dispatch:AppThunk) {\r\n    dispatch(submitOrderRequest());\r\n    \r\n    \r\n      fetchWithToken(`${API_URL}${GET_ORDER_ID_URL}`, \"POST\",JSON.stringify({ ingredients: data }))\r\n       .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch(submitOrderResult(true,{number:res.order.number, _id:res.name}));\r\n        } else {\r\n          dispatch(submitOrderResult(false));\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        if (\r\n          ((e.indexOf(\"expired\") > 0 || e.indexOf(\"invalid\") > 0) &&\r\n            e.indexOf(\"token\") > 0) ||\r\n          e.indexOf(\"403\")\r\n        )\r\n          fetchWithRefresh(`${API_URL}${GET_ORDER_ID_URL}`, \"POST\",JSON.stringify({ ingredients: data }))\r\n            .then((res) => {\r\n              if (res && res.success) {\r\n                dispatch(submitOrderResult(true,{number:res.order.number, _id:res.name}));\r\n              } else {\r\n                dispatch(submitOrderResult(false));\r\n              }\r\n            })\r\n            .catch((e) => {\r\n              dispatch(submitOrderResult(false));\r\n            });\r\n        else\r\n        dispatch(submitOrderResult(false));\r\n\r\n      }); \r\n    \r\n      \r\n  };\r\n}\r\nexport function getOrder(number:number){\r\nreturn function (dispatch:AppThunk){\r\n  dispatch(getOrderRequest());\r\n  fetchData(`${API_URL}${GET_ORDER_ID_URL}/${number}`,\"GET\")\r\n  .then((res)=>{\r\n    if(res && res.success && res.orders.length>0){\r\n      dispatch(getOrderResult(true, res.orders[0]));\r\n    }else{\r\n      dispatch(getOrderResult(false));\r\n    }\r\n  }).catch(e=>{\r\n    \r\n    dispatch(getOrderResult(false));\r\n  }\r\n  )    \r\n}\r\n}\r\n","export const SET_ERROR: \"SET_ERROR\" = \"SET_ERROR\";\r\nexport const CLEAR_ERROR: \"CLEAR_ERROR\" = \"CLEAR_ERROR\";\r\nexport interface ISetError{\r\n    readonly type:typeof SET_ERROR,\r\n    readonly error:string\r\n}\r\nexport interface IClearError{\r\n    readonly type:typeof CLEAR_ERROR\r\n}\r\nexport type TErrorActions = ISetError|IClearError\r\nexport const setError=(errorText:string):ISetError=>{\r\n    return {\r\n        type:SET_ERROR,\r\n        error:errorText\r\n    }\r\n}\r\nexport const clearError=():IClearError=>{\r\n    return{\r\n        type:CLEAR_ERROR\r\n    }\r\n}\r\n","import React, { useMemo } from \"react\";\r\nimport styles from \"./burger-constructor.module.css\";\r\nimport BurgerElement from \"../burger-element/burger-element\";\r\nimport SubmitOrder from \"../submit-order/submit-order\";\r\nimport OrderDetails from \"../order-details/order-details\";\r\nimport Modal from \"../modal/modal\";\r\nimport { resetOrder } from \"../../services/actions/order-details\";\r\nimport { useSelector, useDispatch } from \"../../utils/hooks\";\r\nimport { submitOrder } from \"../../services/actions/order-details\";\r\nimport { setError } from \"../../services/actions/error\";\r\nimport {\r\n  addIngredient,\r\n  clearIngredients,\r\n} from \"../../services/actions/burger-constructor\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport {TAddedIngredient,TIngredient, TDraggingElement} from \"../../utils/types\";\r\nimport {HOME_PAGE} from \"../../utils/burger-constants\";\r\n\r\nfunction BurgerConstructor() {\r\n  const history = useHistory();\r\n  const { burger } = useSelector((store) => store.constructor);\r\n  const { user } = useSelector((store) => store.profile);\r\n  const { ingredients } = useSelector((store) => store.ingredients);\r\n  const { orderId, submitOrderFailed } = useSelector((store) => store.order);\r\n  const dispatch = useDispatch();\r\n  const top = useMemo(\r\n    () => (burger ? burger.filter((b:TAddedIngredient) => b.type === \"top\")[0] : null),\r\n    [burger]\r\n  );\r\n  const bottom = useMemo(\r\n    () => (burger ? burger.filter((b:TAddedIngredient) => b.type === \"bottom\")[0] : null),\r\n    [burger]\r\n  );\r\n  const middleIngredients = useMemo(\r\n    () => (burger ? burger.filter((ingr:TAddedIngredient) => ingr.type !== \"bottom\" && ingr.type !== \"top\") : null),\r\n    [burger]\r\n  );\r\n  const closeModal = () => {\r\n    dispatch(resetOrder());\r\n    dispatch(clearIngredients());\r\n  };\r\n\r\n  const onSubmit = (e:React.SyntheticEvent) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    if (!user) {\r\n      history.replace({ pathname: `${HOME_PAGE}/login` });\r\n      return;\r\n  }\r\n    if (!burger || burger.filter((i:TAddedIngredient) => i.type === \"bottom\" || i.type === \"top\").length === 0)\r\n      dispatch(setError( \"Без булок мы готовить не умеем.\" ));\r\n    else dispatch(submitOrder(burger.map((ingr:TAddedIngredient) => ingr._id)));\r\n  };\r\n\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop(item:TDraggingElement) {\r\n      dispatch(addIngredient(ingredients.filter((ingr:TIngredient) => ingr._id === item.id)[0]));\r\n    },\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (submitOrderFailed)\r\n      dispatch(setError(\"Не удалось отправить заказ. Попробуйте еще раз.\"));\r\n  }, [dispatch, submitOrderFailed]);\r\n  return (\r\n    <>\r\n      <div className={styles.burger} id=\"burger-constructor\" ref={dropTarget}>\r\n        {Boolean(burger && burger.length) && (\r\n          <>\r\n            {top && <BurgerElement {...top} isLocked={true}></BurgerElement>}\r\n            <div className=\"pb-4\" />\r\n            {middleIngredients && (\r\n              <div className={styles.scrollable}>\r\n                {middleIngredients.map((ingredient:TAddedIngredient, index:number) => (\r\n                  <React.Fragment key={ingredient.place}>\r\n                    <BurgerElement\r\n                      {...ingredient}\r\n                      index={ingredient.place}\r\n                    ></BurgerElement>\r\n                    <div className=\"pb-4\" />\r\n                  </React.Fragment>\r\n                ))}\r\n              </div>\r\n            )}\r\n            <div className=\"pb-4\" />\r\n            {bottom && (\r\n              <BurgerElement {...bottom} isLocked={true}></BurgerElement>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"pt-10\"></div>\r\n      <SubmitOrder onClick={onSubmit} />\r\n      {orderId && (\r\n        <Modal onClose={closeModal} header=\"\">\r\n          <OrderDetails />\r\n        </Modal>\r\n      )}\r\n    </>\r\n  );\r\n}\r\nexport default BurgerConstructor;\r\n","import React, {FC} from \"react\" ;\r\nimport { TAddedIngredient, TIngredient } from \"../../utils/types\";\r\nimport styles from \"./burger-ingredient-card.module.css\";\r\nimport {\r\n  Counter,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\nimport { useDrag, DragPreviewImage } from \"react-dnd\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { HOME_PAGE } from \"../../utils/burger-constants\";\r\n\r\nconst BurgerIngredientCard:FC<TIngredient> = (props) => {\r\n  const counter = useSelector((store) =>\r\n    store.constructor.burger\r\n      ? store.constructor.burger.filter(\r\n          (ingr:TAddedIngredient) => ingr._id === props._id\r\n        ).length\r\n      : 0\r\n  );\r\n  const [, dragRef, preview] = useDrag({ \r\n    type: \"ingredient\",\r\n    item: { id: props._id },\r\n    collect: (monitor) => ({\r\n      isDrag: monitor.isDragging(),\r\n    }),\r\n  });\r\n  const location = useLocation();\r\n  return (\r\n    <Link\r\n      key={props._id}\r\n      to={{\r\n        pathname: `${HOME_PAGE}/ingredient/${props._id}`,\r\n        state: { background: location },\r\n      }}\r\n      className={styles.link}\r\n    >\r\n      <DragPreviewImage connect={preview} src={props.image} />\r\n      <div className={styles.ingredient_card} id=\"ingredient\" ref={dragRef}>\r\n        {counter !== 0 && <Counter count={counter} size=\"default\" />}\r\n        <img\r\n          src={props.image}\r\n          className={`ml-4 mr-4 mb-1 ${styles.img}`}\r\n          alt={props.name}\r\n        />\r\n        <span className={styles.price_div}>\r\n          <p className=\"text text_type_digits-default mr-2 \">\r\n            {props.price}\r\n          </p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </span>\r\n        <p className={`text text_type_main-small mt-1 ${styles.item_center}`}>\r\n          {props.name}\r\n        </p>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport default BurgerIngredientCard;\r\n","export const SET_TAB:\"SET_TAB\" = \"SET_TAB\";\r\nexport const SET_RATIO:\"SET_RATIO\" = \"SET_RATIO\";\r\nexport interface ISetTab{\r\n    readonly type: typeof SET_TAB,\r\n    readonly current:string,\r\n}\r\nexport interface ISetRatio{\r\n    readonly type: typeof SET_RATIO,\r\n    readonly id:string,\r\n    readonly ratio:number\r\n}\r\nexport type TTabActions=ISetRatio|ISetTab\r\nexport const setTab=(currentTab:string):ISetTab=>{\r\n    return{\r\n        type:SET_TAB,\r\n        current:currentTab\r\n    }\r\n}\r\nexport const setRatio = (id:string, ratio:number):ISetRatio=>{\r\n    return{\r\n        type:SET_RATIO,\r\n        id:id,\r\n        ratio:ratio\r\n    }\r\n}\r\n","import React, { useMemo } from \"react\";\r\nimport BurgerIngredientCard from \"../burger-ingredient-card/burger-ingredient-card\";\r\nimport styles from \"./burger-ingredients-tab.module.css\";\r\nimport { useSelector, useDispatch } from \"../../utils/hooks\";\r\nimport { setRatio } from \"../../services/actions/tab\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { TIngredient, TMenuTab } from \"../../utils/types\";\r\n\r\nconst BurgerIngredientsTab:React.FC<TMenuTab>=(props) =>{\r\n  const { ingredients } = useSelector((store) => store.ingredients);\r\n  const { ref, inView, entry } = useInView({\r\n    // Массив процентов видимиости, при прохождении которых будет обновляться значение entry\r\n    threshold: [0, 0.25, 0.5, 0.75, 1],\r\n  });\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const filteredIngredients = useMemo(\r\n    () => ingredients.filter((ingredient:TIngredient) => ingredient.type === props.id),\r\n    [ingredients, props.id]\r\n  );\r\n  React.useEffect(() => {\r\n    dispatch(setRatio( props.id, entry ? entry.intersectionRatio : 0 ));\r\n  }, [inView, entry, dispatch, props.id]); // При изменении данных/скролле, обновляем ratio\r\n\r\n  return (\r\n    <>\r\n      <p className=\"text text_type_main-medium pl-4 pt-6 pb-10\" id={props.id}>\r\n        {props.title}\r\n      </p>\r\n      <div className={styles.ingretients_tab} ref={ref}>\r\n        {filteredIngredients.map((ingredient:TIngredient) => (\r\n          <BurgerIngredientCard\r\n            key={ingredient._id}\r\n            {...ingredient}\r\n          ></BurgerIngredientCard>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default BurgerIngredientsTab;\r\n","import React from \"react\";\r\nimport styles from \"./burger-ingredients.module.css\";\r\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport BurgerIngredientsTab from \"../burger-ingredients-tab/burger-ingredients-tab\";\r\nimport { useSelector, useDispatch } from \"../../utils/hooks\";\r\nimport { setError, clearError } from \"../../services/actions/error\";\r\nimport { setTab } from \"../../services/actions/tab\";\r\nimport { TMenuTab } from \"../../utils/types\";\r\n\r\nfunction BurgerIngredients() {\r\n  const { ingredientsRequest, ingredientsFailed } = useSelector(\r\n    (store) => store.ingredients\r\n  );\r\n  const { tabs, current } = useSelector((store) => store.tab);\r\n  const dispatch = useDispatch();\r\n\r\n  React.useEffect(() => {\r\n    const element = document.getElementById(current);\r\n    element?.scrollIntoView();\r\n  }, [current]);\r\n  React.useEffect(() => {\r\n    if (ingredientsFailed)\r\n      dispatch(setError(\"Не удалось загрузить ингредиенты\" ));\r\n    else dispatch(clearError());\r\n  }, [dispatch, ingredientsFailed]);\r\n  const setActiveTab = (value:string) => {\r\n    dispatch(setTab(value));\r\n  };\r\n\r\n  return (\r\n    <div className={\" pt-10\"}>\r\n      <p className=\"text text_type_main-large\">Соберите бургер</p>\r\n      <div className=\"mt-5 mb-10\" style={{ display: \"flex\" }}>\r\n        {ingredientsFailed ? (\r\n          <p className=\"text text_type_main-large\">Произошла ошибка.</p>\r\n        ) : ingredientsRequest ? (\r\n          <p className=\"text text_type_main-large\">Загружаем...</p>\r\n        ) : (\r\n          <>\r\n            {tabs.map((tab:TMenuTab, index:number) => (\r\n              <Tab\r\n                key={index}\r\n                value={tab.id}\r\n                active={tab.id === current}\r\n                onClick={setActiveTab}\r\n              >\r\n                {tab.title}\r\n              </Tab>\r\n            ))}\r\n          </>\r\n        )}\r\n      </div>\r\n      <div className={styles.ingredients}>\r\n        <BurgerIngredientsTab id=\"bun\" title=\"Булки\" ratio={1}></BurgerIngredientsTab>\r\n        <BurgerIngredientsTab id=\"sauce\" title=\"Соусы\" ratio={0}></BurgerIngredientsTab>\r\n        <BurgerIngredientsTab\r\n          id=\"main\"\r\n          title=\"Начинки\"\r\n          ratio={0}\r\n        ></BurgerIngredientsTab>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default BurgerIngredients;\r\n","import styles from \"./constructor.module.css\";\r\nimport BurgerConstructor from \"../components/burger-constructor/burger-constructor\";\r\nimport BurgerIngredients from \"../components/burger-ingredients/burger-ingredients\";\r\nimport React from \"react\";\r\nimport Modal from \"../components/modal/modal\";\r\nimport { useSelector, useDispatch } from \"../utils/hooks\";\r\nimport { CLEAR_ERROR } from \"../services/actions/error\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nexport const ConstructorPage = () => {\r\n  const { error } = useSelector((store) => store.error);\r\n  const dispatcher = useDispatch();\r\n\r\n  return (\r\n    <>\r\n      <main className={styles.main}>\r\n        <DndProvider backend={HTML5Backend}>\r\n          <section className={`pl-9 ${styles.section}`}>\r\n            <BurgerIngredients />\r\n          </section>\r\n          <div className=\"ml-10\" />\r\n          <section className={`mt-25 pr-9 ${styles.section}`}>\r\n            <BurgerConstructor />\r\n          </section>\r\n        </DndProvider>\r\n        {error && (\r\n          <Modal\r\n            header=\"Печалька :(\"\r\n            onClose={() => dispatcher({ type: CLEAR_ERROR })}\r\n          >\r\n            <span className=\"text text_type_main-medium\">{`\"${error}\"`}</span>\r\n          </Modal>\r\n        )}\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n","import {\r\n  setCookie,\r\n  deleteCookie,\r\n  getCookie,\r\n  fetchData,\r\n} from \"../../utils/utils\";\r\nimport { API_URL, LOGIN_URL, LOGOUT_URL } from \"../../utils/burger-constants\";\r\nimport {AppThunk, TUser} from \"../../utils/types\"\r\n\r\nexport const LOGIN_REQUEST = \"LOGIN_REQUEST\";\r\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\r\nexport const LOGIN_FAILED = \"LOGIN_FAILED\";\r\n\r\nexport const LOGOUT_REQUEST = \"LOGOUT_REQUEST\";\r\nexport const LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\";\r\nexport const LOGOUT_FAILED = \"LOGOUT_FAILED\";\r\nexport interface ILoginRequest{\r\n  readonly type: typeof LOGIN_REQUEST,\r\n}\r\nexport interface ILoginSuccess{\r\n  readonly type: typeof LOGIN_SUCCESS,\r\n  readonly user:TUser\r\n}\r\nexport interface ILoginFailed{\r\n  readonly type: typeof LOGIN_FAILED,\r\n}\r\nexport interface ILogoutRequest{\r\n  readonly type: typeof LOGOUT_REQUEST,\r\n}\r\nexport interface ILogoutSuccess{\r\n  readonly type: typeof LOGOUT_SUCCESS,\r\n}\r\nexport interface ILogoutFailed{\r\n  readonly type: typeof LOGOUT_FAILED,\r\n}\r\nexport type TLoginActions = ILoginFailed|ILoginRequest|ILoginSuccess|ILogoutFailed|ILogoutRequest|ILogoutSuccess;\r\nexport const loginRequest=():ILoginRequest=>{\r\n  return {\r\n    type:LOGIN_REQUEST\r\n  }\r\n}\r\nexport const loginSucccess=(user:TUser):ILoginSuccess=>{\r\n  return {\r\n    type:LOGIN_SUCCESS,\r\n    user\r\n  }\r\n}\r\nexport const loginFailed=():ILoginFailed=>{\r\n  return {\r\n    type:LOGIN_FAILED\r\n  }\r\n}\r\nexport const logoutRequest=():ILogoutRequest=>{\r\n  return {\r\n    type:LOGOUT_REQUEST\r\n  }\r\n}\r\nexport const logoutSucccess=():ILogoutSuccess=>{\r\n  return {\r\n    type:LOGOUT_SUCCESS\r\n  }\r\n}\r\nexport const logoutFailed=():ILogoutFailed=>{\r\n  return {\r\n    type:LOGOUT_FAILED\r\n  }\r\n}\r\nexport function login(data:TUser) {\r\n  return function (dispatch:AppThunk) {\r\n    dispatch(loginRequest());\r\n    fetchData(`${API_URL}${LOGIN_URL}`, \"POST\", JSON.stringify(data))\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          let aToken = res.accessToken.split(\"Bearer \")[1];\r\n          setCookie(\"accessToken\", aToken, { expires: 1200 });\r\n          setCookie(\"refreshToken\", res.refreshToken);\r\n          dispatch(loginSucccess(res.user));\r\n        } else {\r\n          dispatch(loginFailed());\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        dispatch(loginFailed());\r\n      });\r\n  };\r\n}\r\nexport function logout() {\r\n  return function (dispatch:AppThunk) {\r\n    dispatch(logoutRequest());\r\n    if (!getCookie(\"refreshToken\"))\r\n      dispatch(logoutSucccess());\r\n    else\r\n      fetchData(\r\n        `${API_URL}${LOGOUT_URL}`,\r\n        \"POST\",\r\n        JSON.stringify({ token: getCookie(\"refreshToken\") })\r\n      )\r\n        .then((res) => {\r\n          if (res && res.success) {\r\n            deleteCookie(\"accessToken\");\r\n            deleteCookie(\"refreshToken\");\r\n            dispatch(logoutSucccess());\r\n          } else {\r\n            dispatch(logoutFailed());\r\n          }\r\n        })\r\n        .catch((e) => {\r\n           dispatch(logoutFailed());\r\n        });\r\n  };\r\n}\r\n","import styles from \"./awaiter.module.css\";\r\nexport const Awaiter = () => {\r\n  return (\r\n    <div className={styles.main}>\r\n      <div className={styles.inner}>\r\n        <p className=\"text text_type_main-large m-20\">\r\n          Подождите, идет загрузка...\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./login.module.css\";\r\nimport { Link, Redirect, useLocation } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"../utils/hooks\";\r\nimport { login } from \"../services/actions/login\";\r\nimport { setError, clearError } from \"../services/actions/error\";\r\nimport {\r\n  EmailInput,\r\n  PasswordInput,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Awaiter } from \"../components/awaiter/awaiter\";\r\nimport { TLocationState } from \"../utils/types\";\r\nimport { HOME_PAGE } from \"../utils/burger-constants\";\r\n\r\nexport const LoginPage = () => {\r\n  const [emailValue, setEmailValue] = React.useState<string>(\"\");\r\n  const [passValue, setPassValue] = React.useState<string>(\"\");\r\n  const { error } = useSelector((store) => store.error);\r\n  const { loginRequestFailed } = useSelector((store) => store.login);\r\n  const { profileRequest, user } = useSelector((store) => store.profile);\r\n  const dispatch = useDispatch();\r\n  const location = useLocation<TLocationState>();\r\n  const LogInClick = (e:React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    dispatch(clearError());\r\n    dispatch(login({ email: emailValue, password: passValue }));\r\n  };\r\n  React.useEffect(() => {\r\n    if (loginRequestFailed)\r\n      dispatch(setError(\"Проверьте правильность логина и пароля\"));\r\n    else dispatch(clearError());\r\n  }, [dispatch, loginRequestFailed]);\r\n\r\n  const onChangeEmail = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    setEmailValue(e.target.value);\r\n  };\r\n  const onChangePass = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassValue(e.target.value);\r\n  };\r\n  return user ? (\r\n    <Redirect\r\n      to={\r\n        location.state?.from?.pathname === `${HOME_PAGE}/exit`\r\n          ? `${HOME_PAGE}/`\r\n          : location.state?.from || `${HOME_PAGE}/`\r\n      }\r\n    />\r\n  ) : profileRequest ? (\r\n    <>\r\n      <Awaiter />\r\n    </>\r\n  ) : (\r\n    <form onSubmit={LogInClick}>\r\n      <div className={styles.main}>\r\n        <div className={styles.inner}>\r\n          <p className=\"text text_type_main-large mb-6\">Вход</p>\r\n          <div className={styles.item} id=\"email\">\r\n            <EmailInput\r\n              size=\"default\"\r\n              onChange={onChangeEmail}\r\n              value={emailValue}\r\n              name={\"email\"}\r\n            />\r\n          </div>\r\n          <span className=\"mb-6\"></span>\r\n          <div className={styles.item} id=\"password\">\r\n            <PasswordInput\r\n              size=\"default\"\r\n              onChange={onChangePass}\r\n              value={passValue}\r\n              name={\"password\"}\r\n            />\r\n          </div>\r\n          <span className=\"mb-6\"></span>\r\n          <div className={styles.item}>\r\n            <Button type=\"primary\" size=\"small\">\r\n              Войти\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"mt-20\">\r\n            {error && <p className=\"text text_type_main-medium\">{error}</p>}\r\n            <p className=\"text text_type_main-small\">\r\n              Вы - новый пользователь?{\" \"}\r\n              <Link to={`${HOME_PAGE}/register`}>Зарегистрироваться</Link>\r\n            </p>\r\n          </div>\r\n          <div className=\"mt-4\">\r\n            <p className=\"text text_type_main-small\">\r\n              Забыли пароль?{\" \"}\r\n              <Link to={`${HOME_PAGE}/forgot-password`}>Восстановить пароль</Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import { Link } from \"react-router-dom\";\r\nimport styles from \"./page404.module.css\";\r\nimport { HOME_PAGE } from \"../utils/burger-constants\";\r\n\r\nexport const Code404Page = () => {\r\n  return (\r\n    <>\r\n      <main className={styles.main}>\r\n        <div>\r\n          <section className={styles.section}>\r\n            <p className=\"text text_type_digits-large\">404</p>\r\n          </section>\r\n          <section className={styles.section}>\r\n            <p className=\"text text_type_main-large\">Страница не найдена</p>\r\n            <Link to={`${HOME_PAGE}/`}>\r\n              <span className=\"text text_type_main-medium\">на главную</span>\r\n            </Link>\r\n          </section>\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./login.module.css\";\r\nimport { useSelector, useDispatch } from \"../utils/hooks\";\r\nimport { setError, clearError } from \"../services/actions/error\";\r\nimport { register } from \"../services/actions/profile\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport {\r\n  Input,\r\n  PasswordInput,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Awaiter } from \"../components/awaiter/awaiter\";\r\nimport { HOME_PAGE } from \"../utils/burger-constants\";\r\nexport const RegisterPage = () => {\r\n  const [emailValue, setEmailValue] = React.useState(\"\");\r\n  const [passValue, setPassValue] = React.useState(\"\");\r\n  const [nameValue, setNameValue] = React.useState(\"\");\r\n  const { user, regRequestFailed, regRequest } = useSelector(\r\n    (store) => store.profile\r\n  );\r\n  const { error } = useSelector((store) => store.error);\r\n  const dispatch = useDispatch();\r\n  const onSubmit = (e:React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    dispatch(clearError());\r\n    dispatch(\r\n      register({ email: emailValue, password: passValue, name: nameValue })\r\n    );\r\n  };\r\n  React.useEffect(() => {\r\n    if (regRequestFailed)\r\n      dispatch(setError( \"Регистрация не прошла\" ));\r\n  }, [dispatch, regRequestFailed]);\r\n  const onChangeEmail = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    setEmailValue(e.target.value);\r\n  };\r\n  const onChangeName = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    setNameValue(e.target.value);\r\n  };\r\n  const onChangePass = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassValue(e.target.value);\r\n  };\r\n  if (user) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: `${HOME_PAGE}/`,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  return regRequest ? (\r\n    <Awaiter />\r\n  ) : (\r\n    <form onSubmit={onSubmit}>\r\n      <div className={styles.main}>\r\n        <div className={styles.inner}>\r\n          <p className=\"text text_type_main-large mb-6\">Регистрация</p>\r\n\r\n          <div className={styles.item}>\r\n            <Input\r\n              type={\"text\"}\r\n              placeholder={\"Имя\"}\r\n              onChange={onChangeName}\r\n              value={nameValue}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <span className=\"mb-6\"></span>\r\n          <div className={styles.item}>\r\n            <Input\r\n              type={\"text\"}\r\n              placeholder={\"E-mail\"}\r\n              onChange={onChangeEmail}\r\n              value={emailValue}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <span className=\"mb-6\"></span>\r\n          <div className={styles.item}>\r\n            <PasswordInput\r\n              size=\"default\"\r\n              onChange={onChangePass}\r\n              value={passValue}\r\n              name={\"password\"}\r\n            />\r\n          </div>\r\n          <span className=\"mb-6\"></span>\r\n          <div className={styles.item}>\r\n            <Button type=\"primary\" size=\"small\">\r\n              Зарегистрироваться\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"mt-20\">\r\n            {error && <p className=\"text text_type_main-large mb-6\">{error}</p>}\r\n            <p className=\"text text_type_main-small\">\r\n              Уже зарегистрироаны? <Link to={`${HOME_PAGE}/login`}>Войти</Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./forgot-password.module.css\";\r\nimport {\r\n  Input,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDispatch, useSelector } from \"../utils/hooks\";\r\nimport { forgotPassword } from \"../services/actions/profile\";\r\nimport { setError, clearError } from \"../services/actions/error\";\r\nimport { useHistory, Redirect, Link } from \"react-router-dom\";\r\nimport { Awaiter } from \"../components/awaiter/awaiter\";\r\nimport { HOME_PAGE } from \"../utils/burger-constants\";\r\nexport const ForgotPasswordPage = () => {\r\n  const [emailValue, setEmailValue] = React.useState(\"\");\r\n\r\n  const {\r\n    profileRequest,\r\n    profileRequestFailed,\r\n    passwordResetRequired,\r\n    message,\r\n  } = useSelector((store) => store.profile);\r\n  const { loggedIn } = useSelector((store) => store.login);\r\n  const { error } = useSelector((store) => store.error);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const onSubmit = (e:React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    dispatch(clearError());\r\n    dispatch(forgotPassword({ email: emailValue }));\r\n  };\r\n  const onChangeEmail = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    setEmailValue(e.target.value);\r\n  };\r\n  React.useEffect(() => {\r\n    if (profileRequestFailed && emailValue){\r\n      if(typeof message === \"string\") dispatch(setError(message));\r\n    }\r\n    else if (\r\n      passwordResetRequired &&\r\n      !profileRequest &&\r\n      !profileRequestFailed\r\n    ) {\r\n      history.replace({ pathname: `${HOME_PAGE}/reset-password`, state: history.location });\r\n    }\r\n  }, [\r\n    dispatch,\r\n    profileRequestFailed,\r\n    emailValue,\r\n    passwordResetRequired,\r\n    message,\r\n    profileRequest,\r\n    history,\r\n  ]);\r\n\r\n  return loggedIn ? (\r\n    <Redirect to={`${HOME_PAGE}/`} />\r\n  ) : profileRequest ? (\r\n    <>\r\n      <Awaiter />\r\n    </>\r\n  ) : (\r\n    <>\r\n      <form onSubmit={onSubmit}>\r\n        <div className={styles.main}>\r\n          <div className={styles.inner}>\r\n            <p className=\"text text_type_main-large mb-6\">\r\n              Восстановление пароля\r\n            </p>\r\n            <span className=\"mb-6\"></span>\r\n            <div className={styles.item}>\r\n              <Input\r\n                type=\"text\"\r\n                placeholder=\"укажите e-mail\"\r\n                onChange={onChangeEmail}\r\n                value={emailValue}\r\n                size=\"default\"\r\n              />\r\n            </div>\r\n            <span className=\"mb-6\"></span>\r\n            <div className={styles.item}>\r\n              <Button type=\"primary\" size=\"small\">\r\n                Восстановить\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"mt-20\">\r\n              {error && <p className=\"text text_type_main-small\">{error}</p>}\r\n              <p className=\"text text_type_main-small\">\r\n                Вспомнили пароль? <Link to={`${HOME_PAGE}/login`}>Войти</Link>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Awaiter } from \"../components/awaiter/awaiter\";\r\nimport styles from \"./reset-password.module.css\";\r\nimport { useSelector, useDispatch } from \"../utils/hooks\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\n\r\nimport {\r\n  Input,\r\n  Button,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { resetPassword } from \"../services/actions/profile\";\r\nimport { setError, clearError } from \"../services/actions/error\";\r\nimport { TLocationState } from \"../utils/types\";\r\nimport { HOME_PAGE } from \"../utils/burger-constants\";\r\n\r\nexport const ResetPasswordPage = () => {\r\n  const [value, setValue] = React.useState(\"\");\r\n  const [passValue, setPassValue] = React.useState(\"\");\r\n  const {\r\n    user,\r\n    message,\r\n    profileRequestFailed,\r\n    profileRequest,\r\n    passwordReseted,\r\n  } = useSelector((store) => store.profile);\r\n  const { error } = useSelector((store) => store.error);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory<TLocationState>();\r\n  const onSubmit = (e:React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    dispatch(clearError());\r\n    dispatch(resetPassword({ password: passValue, token: value }));\r\n  };\r\n  React.useEffect(() => {\r\n    if (profileRequestFailed && passValue){\r\n      if(typeof message === \"string\") dispatch(setError( message ));\r\n    }\r\n    else if (passwordReseted && !profileRequest && !profileRequestFailed) {\r\n      history.replace({ pathname: `${HOME_PAGE}/login` });\r\n    }\r\n  }, [\r\n    dispatch,\r\n    profileRequestFailed,\r\n    passwordReseted,\r\n    passValue,\r\n    message,\r\n    profileRequest,\r\n    history,\r\n  ]);\r\n\r\n  const onChange = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    setValue(e.target.value);\r\n  };\r\n  const onChangePass = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassValue(e.target.value);\r\n  };\r\n  if (history.location.state?.pathname !== `${HOME_PAGE}/forgot-password`)\r\n    return <Redirect to={`${HOME_PAGE}/forgot-password`} />;\r\n  return user ? (\r\n    <Redirect to=\"/\" />\r\n  ) : profileRequest ? (\r\n    <Awaiter />\r\n  ) : (\r\n    <form onSubmit={onSubmit}>\r\n      <div className={styles.main}>\r\n        <div className={styles.inner}>\r\n          <p className=\"text text_type_main-large mb-6\">\r\n            Восстановление пароля\r\n          </p>\r\n          <span className=\"mb-6\"></span>\r\n          <div className={styles.item}>\r\n            <PasswordInput\r\n              size=\"default\"\r\n              onChange={onChangePass}\r\n              value={passValue}\r\n              name={\"password\"}\r\n            />\r\n          </div>\r\n          <span className=\"mb-6\"></span>\r\n          <div className={styles.item}>\r\n            <Input\r\n              type=\"text\"\r\n              placeholder=\"Введите код из письма\"\r\n              onChange={onChange}\r\n              value={value}\r\n              size=\"default\"\r\n            />\r\n          </div>\r\n          <span className=\"mb-6\"></span>\r\n          <div className={styles.item}>\r\n            <Button type=\"primary\" size=\"small\">\r\n              Восстановить\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"mt-20\">\r\n            {error && <p className=\"text text_type_main-small\">{error}</p>}\r\n            <p className=\"text text_type_main-small\">\r\n              Вспомнили пароль? <Link to={`${HOME_PAGE}/login`}>Войти</Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./profile-data.module.css\";\r\nimport {\r\n  Input,\r\n  EmailInput,\r\n  PasswordInput,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDispatch, useSelector } from \"../../utils/hooks\";\r\nimport { setUser } from \"../../services/actions/profile\";\r\nimport { setError, clearError } from \"../../services/actions/error\";\r\n\r\nconst ProfileData = () => {\r\n  const [emailValue, setEmailValue] = React.useState<string|null>(null);\r\n  const [nameValue, setNameValue] = React.useState<string|null>(null);\r\n\r\n  const { user, setProfileRequest, setProfileRequestFailed } = useSelector(\r\n    (store) => store.profile\r\n  );\r\n  const { error } = useSelector((store) => store.error);\r\n  const dispatch = useDispatch();\r\n  const onCancel = () => {\r\n    setEmailValue(null);\r\n    setNameValue(null);\r\n  };\r\n  const onSave = (e:React.SyntheticEvent) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    dispatch(clearError());\r\n    dispatch(\r\n      setUser({ name: nameValue || user?.name , email: emailValue || user?.email || '' })\r\n    );\r\n  };\r\n  const onChangeEmail = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    e.preventDefault();\r\n    setEmailValue(e.target.value);\r\n  };\r\n  const onChangePass = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    e.preventDefault();\r\n  };\r\n  const onChangeName = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    e.preventDefault();\r\n    setNameValue(e.target.value);\r\n  };\r\n  React.useEffect(() => {\r\n    if (setProfileRequestFailed) {\r\n      dispatch(setError(\"Данные не были сохранены\" ));\r\n\r\n      setEmailValue(null);\r\n      setNameValue(null);\r\n    }\r\n  }, [user, dispatch, setProfileRequestFailed]);\r\n  return (\r\n    <form onSubmit={onSave}>\r\n      <div className={styles.main}>\r\n        <div className={styles.item}>\r\n          <Input\r\n            placeholder=\"Имя\"\r\n            icon={\"EditIcon\"}\r\n            size=\"default\"\r\n            onChange={onChangeName}\r\n            value={nameValue || nameValue === \"\" ? nameValue : user?.name || ''}\r\n          ></Input>\r\n        </div>\r\n        <span className=\"mb-6\"></span>\r\n        <div className={styles.item}>\r\n          <EmailInput\r\n            name=\"Email\"\r\n            size=\"default\"\r\n            onChange={onChangeEmail}\r\n            value={emailValue || emailValue === \"\" ? emailValue : user?.email || ''}\r\n          ></EmailInput>\r\n        </div>\r\n        <span className=\"mb-6\"></span>\r\n        <div className={styles.item}>\r\n          <PasswordInput\r\n            size=\"default\"\r\n            name=\"password\"\r\n            value={\"\"}\r\n            onChange={onChangePass}\r\n          ></PasswordInput>\r\n        </div>\r\n        <span className=\"mt-6\" />\r\n        {((emailValue && emailValue !== user?.email) ||\r\n          (nameValue && nameValue !== user?.name)) && (\r\n          <div className={styles.item}>\r\n            <span className=\"mr-3\">\r\n            <Button type=\"primary\" size=\"medium\" >\r\n              Сохранить\r\n            </Button>\r\n            </span>\r\n            <span className=\"ml-3\">\r\n            <Button\r\n              type=\"primary\"\r\n              size=\"medium\"\r\n              \r\n              onClick={onCancel}\r\n            >\r\n              Отмена\r\n            </Button>\r\n            </span>\r\n          </div>\r\n        )}\r\n        <div className={styles.item}>\r\n          <p className=\"text text_type_main-medium\">\r\n            {setProfileRequest ? \"Идет сохранение данных\" : error}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\nexport default ProfileData;\r\n","import React from \"react\";\r\nimport { useSelector } from \"../../../utils/hooks\";\r\nimport { TIngredient, TOrderIngredients } from \"../../../utils/types\";\r\nimport styles from \"./ingredient-row.module.css\";\r\nimport { useMemo } from \"react\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nconst IngredientRow:React.FC<TOrderIngredients> = (props)=>{\r\n    const { ingredients } = useSelector((store) => store.ingredients);\r\n    const selectedIngreients = useMemo(()=>{\r\n    var si:Array<TIngredient>=[];\r\n      props.ingredients.forEach(\r\n          (i)=>{\r\n              let ingr = ingredients.find((ingr)=>ingr._id===i)\r\n              if(ingr) si.push({...ingr})\r\n          }        \r\n      ) ;\r\n      return si;\r\n        },[props,ingredients]  \r\n    )\r\n    const price = useMemo(()=>selectedIngreients.length === 0?0: selectedIngreients.map((ingr)=>ingr.price).reduce((s,price)=>s+price),[selectedIngreients]);\r\n    \r\nreturn(\r\n    <div className={styles.main} >\r\n<div className={styles.img_container} style={{padding:`0 0 0 ${36*(props.ingredients.length-1)}px`}} >\r\n   {selectedIngreients&& selectedIngreients.map((ingr:TIngredient, index:number)=>\r\n   (       \r\n       <img key={index} src={ingr.image} className={styles.item} style={{margin:`0 0 0 ${index*36*-1}px`}} alt={ingr.name}></img>\r\n    )\r\n   )} \r\n</div>\r\n\r\n<span className={styles.price_div}>\r\n          <p className=\"text text_type_digits-default mr-2 \">\r\n            {price}\r\n          </p>\r\n          <CurrencyIcon type=\"primary\" />\r\n    </span>\r\n    \r\n</div>\r\n)\r\n}\r\nexport default IngredientRow","import React from \"react\";\r\nimport { TOrder } from \"../../../utils/types\";\r\nimport IngredientRow from \"../ingredient-row/ingredient-row\";\r\nimport styles from \"./order-card.module.css\";\r\nimport { dateToString } from \"../../../utils/utils\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nconst OrderCard:React.FC<TOrder> = (props)=>{\r\n    const location = useLocation();\r\n    \r\nreturn(\r\n    <Link\r\n      key={props.number}\r\n      to={{\r\n        pathname:  `${location.pathname}${location.pathname[location.pathname.length-1]===\"/\"?\"\":\"/\"}${props.number}`,\r\n        state: { background: location },\r\n      }}\r\n      className={styles.link}\r\n    >\r\n<div className={`p-6 mt-3 mb-3 ${styles.card}`}>\r\n    <div className={styles.row}><p className=\"text text_type_digits-default\" >#{props.number}</p>\r\n    <p className=\"text text_type_main-default text_color_inactive\" >{dateToString(props.createdAt)}</p>\r\n    </div>\r\n    <p className=\"mt-6 mb-6 text text_type_main-medium\">{props.name}</p>\r\n    {props.status && <p className={`mt-2 mb-6 text text_type_main-small ${props.status===\"done\"?styles.green:\"\"}`}>{props.status===\"done\"?\"готов\":props.status}</p>}\r\n    {props.ingredients && <IngredientRow  ingredients={props.ingredients} ></IngredientRow>}   \r\n    \r\n</div>\r\n</Link>\r\n)\r\n}\r\nexport default OrderCard","import styles from \"./profile-orders-data.module.css\";\r\nimport OrderCard from \"../orders-info/order-card/order-card\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\nimport { TOrder } from \"../../utils/types\";\r\nconst ProfileOrdersData=()=>{\r\n    const { orders } = useSelector(store=>store.ws);\r\n  \r\nreturn(\r\n\r\n    <section className={styles.scrollable}>\r\n        <span className=\"ml-6\" >\r\n        {orders && orders.length>0 ? orders.map((order:TOrder, index:number)=>\r\n            <OrderCard {...order} key={index} ></OrderCard>\r\n        ):(\r\n            <p className=\"mb-6  text text_type_main-medium\">Заказов пока нет</p>\r\n        )\r\n        }\r\n    </span>\r\n    </section>\r\n    \r\n   \r\n)\r\n}\r\nexport default ProfileOrdersData;","import { TOrder, TWSResponse } from \"../../utils/types\";\r\n\r\nimport { WS_URL, ORDERS_ALL_URL,USER_ORDERS_URL   } from \"../../utils/burger-constants\";\r\nexport const WS_CONNECTION_START:\"WS_CONNECTION_START\" =\"WS_CONNECTION_START\";\r\nexport const WS_CONNECTION_SUCCESS:\"WS_CONNECTION_SUCCESS\" =\"WS_CONNECTION_SUCCESS\";\r\nexport const WS_CONNECTION_ERROR:\"WS_CONNECTION_ERROR\" =\"WS_CONNECTION_ERROR\";\r\nexport const WS_CONNECTION_CLOSED:\"WS_CONNECTION_CLOSED\" =\"WS_CONNECTION_CLOSED\";\r\nexport const WS_GET_MESSAGE:\"WS_GET_MESSAGE\" =\"WS_GET_MESSAGE\";\r\nexport const WS_SEND_MESSAGE:\"WS_SEND_MESSAGE\" =\"WS_SEND_MESSAGE\";\r\nexport const WS_CLOSE_CONNECTION:\"WS_CLOSE_CONNECTION\"=\"WS_CLOSE_CONNECTION\";\r\nexport interface IStartConnection{\r\n    readonly type:typeof WS_CONNECTION_START,\r\n    readonly payload:string\r\n}\r\nexport interface IConnectionStarted{\r\n    readonly type:typeof WS_CONNECTION_SUCCESS\r\n}\r\nexport interface IConnectionError{\r\n    readonly type:typeof WS_CONNECTION_ERROR,\r\n    readonly payload?:Event,\r\n}\r\nexport interface IConnectionClosed{\r\n    readonly type:typeof WS_CONNECTION_CLOSED\r\n}\r\nexport interface IGetMessage{\r\n    readonly type:typeof WS_GET_MESSAGE,\r\n    readonly payload:TWSResponse\r\n}\r\nexport interface ISendMessage{\r\n    readonly type:typeof WS_SEND_MESSAGE,\r\n    readonly payload:TOrder\r\n}\r\nexport interface ICloseConnection{\r\n    readonly type:typeof WS_CLOSE_CONNECTION\r\n}\r\nexport type TWSActions = IStartConnection | IConnectionStarted |IConnectionError |IConnectionClosed |IGetMessage |ISendMessage | ICloseConnection;\r\nexport const startConnection=(token :string):IStartConnection|IConnectionError=>{\r\n    const wsUrl = token?`${WS_URL}${USER_ORDERS_URL}?token=${token}`:`${WS_URL}${ORDERS_ALL_URL}`;\r\n    return{\r\n        type:WS_CONNECTION_START,\r\n        payload:wsUrl\r\n    }\r\n}\r\nexport const closeConnection=():ICloseConnection=>{\r\n    return{\r\n        type:WS_CLOSE_CONNECTION,\r\n        \r\n    }\r\n}\r\nexport const connectionStarted=():IConnectionStarted=>{\r\n    return{\r\n        type:WS_CONNECTION_SUCCESS\r\n    }\r\n}\r\nexport const connectionError=(evt:Event|undefined):IConnectionError=>{\r\n    return{\r\n        type:WS_CONNECTION_ERROR,\r\n        payload:evt,\r\n    }\r\n}\r\nexport const connectionClosed=():IConnectionClosed=>{\r\n    return{\r\n        type:WS_CONNECTION_CLOSED\r\n    }\r\n}\r\nexport const getMessage=(msg:string):IGetMessage=>{\r\n    const answer:TWSResponse = JSON.parse(msg);\r\n    return{\r\n        type:WS_GET_MESSAGE,\r\n        payload:answer\r\n    }\r\n}\r\nexport const sendMessage=(msg:TOrder):ISendMessage=>{\r\n    return{\r\n        type:WS_SEND_MESSAGE,\r\n        payload:msg\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport ProfileData from \"../components/profile-data/profile-data\";\r\nimport ProfileOrdersData from \"../components/profile-orders-data/profile-orders-data\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport styles from \"./profile.module.css\";\r\nimport { useLocation, Redirect } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"../utils/hooks\";\r\nimport { logout } from \"../services/actions/login\";\r\nimport {startConnection, closeConnection} from \"../services/actions/ws\";\r\nimport { getToken } from \"../utils/utils\";\r\nimport { HOME_PAGE } from \"../utils/burger-constants\";\r\n\r\nexport const ProfilePage = () => {\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n  const { user } = useSelector((store) => store.profile);\r\n  React.useEffect(() => {\r\n    if (location.pathname === `${HOME_PAGE}/exit`) {\r\n      dispatch(logout());\r\n    }\r\n  }, [location, dispatch]);\r\n  React.useEffect(()=>{   \r\n    getToken().then((res)=>{\r\n     dispatch(startConnection(res));\r\n    })\r\n    .catch((e)=>{\r\n      dispatch(logout());\r\n    })\r\nreturn ()=>{ dispatch(closeConnection())}\r\n  },[dispatch])\r\n    \r\n  return !user ? (\r\n    <Redirect to={`${HOME_PAGE}/login`} />\r\n  ) : (\r\n    <main className={styles.main}>\r\n      <section className={styles.section}>\r\n        <nav>\r\n          <div className={styles.divLink}>\r\n            <NavLink\r\n              className={\"text text_type_main-medium \" + styles.link}\r\n              to={`${HOME_PAGE}/profile`}\r\n            >\r\n              <p\r\n                className={\r\n                  location.pathname === `${HOME_PAGE}/profile` ? styles.alink : styles.link\r\n                }\r\n              >\r\n                {\" \"}\r\n                Профиль\r\n              </p>\r\n            </NavLink>\r\n          </div>\r\n          <div className={styles.divLink}>\r\n            <NavLink\r\n              className={\"text text_type_main-medium \" + styles.link}\r\n              to={`${HOME_PAGE}/profile/orders`}\r\n            >\r\n              <p\r\n                className={\r\n                  location.pathname ===`${HOME_PAGE}/profile/orders` \r\n                    ? styles.alink\r\n                    : styles.link\r\n                }\r\n              >\r\n                {\" \"}\r\n                История заказов\r\n              </p>\r\n            </NavLink>\r\n          </div>\r\n          <div className={styles.divLink}>\r\n            <NavLink\r\n              className={\"text text_type_main-medium \" + styles.link}\r\n              to={`${HOME_PAGE}/exit`}\r\n            >\r\n              <p\r\n                className={\r\n                  location.pathname === `${HOME_PAGE}/exit` ? styles.alink : styles.link\r\n                }\r\n              >\r\n                {\" \"}\r\n                Выход\r\n              </p>\r\n            </NavLink>\r\n          </div>\r\n\r\n          <div className={`pt-20 ${styles.divLink}`}>\r\n            <p className=\"text text_type_main-small mt-3 mb-3\">\r\n              В этом разделе вы можете изменить свои персональные данные\r\n            </p>\r\n          </div>\r\n        </nav>\r\n      </section>\r\n      <span className=\"mr-15\"></span>\r\n      <section className={styles.section}>\r\n        {location.pathname === `${HOME_PAGE}/profile` && <ProfileData />}\r\n        {location.pathname === `${HOME_PAGE}/profile/orders` && <ProfileOrdersData />}\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\n","import React, {FC} from'react';\r\nimport { TIngredient } from \"../../utils/types\";\r\nimport styles from \"./ingredient-details.module.css\";\r\nconst  IngredientDetails: FC<TIngredient> = (props) => {\r\n  return (\r\n    <div className={styles.details_card}>\r\n      <img src={props.image_large} alt={props.name}></img>\r\n      <p className=\"text text_type_main-medium pt-4 pb-8\">\r\n        {props.name}\r\n      </p>\r\n      <div\r\n        className={`text text_type_main-small text_color_inactive ${styles.details}`}\r\n      >\r\n        <div className={styles.details_part}>\r\n          <p>Калории, ккал</p>\r\n          <p>{props.calories}</p>\r\n        </div>\r\n        <div className=\"pl-5\"></div>\r\n        <div className={styles.details_part}>\r\n          <p>Белки, г</p>\r\n          <p>{props.proteins}</p>\r\n        </div>\r\n        <div className=\"pl-5\"></div>\r\n        <div className={styles.details_part}>\r\n          <p>Жиры, г</p>\r\n          <p>{props.fat}</p>\r\n        </div>\r\n        <div className=\"pl-5\"></div>\r\n        <div className={styles.details_part}>\r\n          <p>Углеводы, г</p>\r\n          <p>{props.carbohydrates}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default IngredientDetails;\r\n","export const SET_CURRENT_INGREDIENT: \"SET_CURRENT_INGREDIENT\" =\r\n  \"SET_CURRENT_INGREDIENT\";\r\nexport const CLEAR_CURRENT_INGREDIENT: \"CLEAR_CURRENT_INGREDIENT\" =\r\n  \"CLEAR_CURRENT_INGREDIENT\";\r\nexport interface ISetCurrentIngredient{\r\n  readonly type: typeof SET_CURRENT_INGREDIENT,\r\n  readonly id:string\r\n}\r\nexport interface IClearCurrentIngredient{\r\n  readonly type: typeof CLEAR_CURRENT_INGREDIENT\r\n}\r\nexport type TCurrentIngredientActions= ISetCurrentIngredient|IClearCurrentIngredient\r\nexport const setCurrentIngredient =(ingredientId:string):ISetCurrentIngredient=>{\r\n  return{\r\n    type:SET_CURRENT_INGREDIENT,\r\n    id:ingredientId\r\n  }\r\n}\r\nexport const clearCurrentIngredient =():IClearCurrentIngredient=>{\r\n  return{\r\n    type:CLEAR_CURRENT_INGREDIENT\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { useSelector, useDispatch } from \"../utils/hooks\";\r\nimport IngredientDetails from \"../components/ingredient-details/ingredient-details\";\r\nimport styles from \"./ingredient-details.module.css\";\r\nimport { Awaiter } from \"../components/awaiter/awaiter\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { setCurrentIngredient } from \"../services/actions/ingredient-details\";\r\nimport { TIngredient } from \"../utils/types\";\r\nexport const IngredientDetailsPage = () => {\r\n  let { id }:{id:string} = useParams();\r\n  const currentIngredient = useSelector((store) =>\r\n    store.ingredients.ingredients.find((i:TIngredient) => i._id === id)\r\n  );\r\n  const { ingredientsRequest, ingredientsFailed } = useSelector(\r\n    (store) => store.ingredients\r\n  );\r\n  const dispatcher = useDispatch();\r\n  React.useEffect(() => {\r\n    dispatcher(setCurrentIngredient(id));\r\n  }, [dispatcher, id]);\r\n  return ingredientsRequest ? (\r\n    <>\r\n      <Awaiter />\r\n    </>\r\n  ) : ingredientsFailed ? (\r\n    <p className=\"text text_type_main-large\">Не удалось загрузить ингредиент</p>\r\n  ) : (\r\n    <>\r\n      <main className={styles.main}>\r\n        <section className={styles.section}>\r\n          {currentIngredient && (\r\n            <IngredientDetails {...currentIngredient} />\r\n          )}\r\n        </section>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n","import styles from \"./order-ingredients-list.module.css\";\r\nimport React, { useMemo } from \"react\";\r\nimport { TOrderIngredients,TIngredient } from \"../../../utils/types\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useSelector } from \"../../../utils/hooks\";\r\n\r\nconst OrderIngredientsList:React.FC<TOrderIngredients>=(props)=>{\r\n    const { ingredients } = useSelector((store) => store.ingredients);\r\n    const selectedIngreients = useMemo(()=>{\r\n    var si:Array<TIngredient&{cnt:number}>=[];\r\n      props.ingredients.forEach(\r\n          (i)=>{\r\n              let ingr = ingredients.find((ingr)=>ingr._id===i)\r\n          if(ingr){\r\n            si.some(c=>c._id===i)?si[si.findIndex(c=>c._id===i)].cnt++:\r\n            si.push({...ingr, cnt:1})\r\n          }\r\n        }\r\n      );\r\n      return si; \r\n    },[props, ingredients])  \r\n \r\nreturn(\r\n    <div className={styles.scrollable}>\r\n        \r\n        {selectedIngreients && selectedIngreients.length>0 && selectedIngreients.map((ingr:TIngredient&{cnt:number}, index:number) => (\r\n        <div className={styles.container} key={index}>\r\n        \r\n        <img src={ingr.image} className={`m-2 ${styles.item}`} alt={ingr.name}></img>\r\n        <p className=\"m-2 text text_type_main-small\" >{ingr.name}</p>       \r\n        \r\n        <span className={`m-2 ${styles.price_div}`}>\r\n          <p className=\"text text_type_digits-default mr-2 \">\r\n            {ingr.cnt}x{ingr.price}\r\n          </p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </span>\r\n\r\n        </div>\r\n        \r\n        ))}\r\n            \r\n    </div>\r\n)\r\n}\r\nexport default OrderIngredientsList;","import styles from \"./order-details-extended.module.css\";\r\nimport React, {useMemo} from \"react\";\r\nimport OrderIngredientsList from \"../order-ingredients-list/order-ingredients-list\";\r\nimport { TOrder } from \"../../../utils/types\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useSelector } from \"../../../utils/hooks\";\r\nimport { dateToString } from \"../../../utils/utils\";\r\nimport {TIngredient} from \"../../../utils/types\";\r\n\r\nconst OrderDetailsExtended:React.FC<TOrder> = (props)=>{\r\n    const { ingredients } = useSelector((store) => store.ingredients);\r\n    const selectedIngreients = useMemo(()=>{\r\n    var si:Array<TIngredient>=[];\r\n      props.ingredients.forEach(\r\n          (i)=>{\r\n              let ingr = ingredients.find((ingr)=>ingr._id===i)\r\n              if(ingr) si.push({...ingr})\r\n          }        \r\n      )   \r\n      return si;\r\n        },[ingredients,props])\r\n    const price = useMemo(()=>selectedIngreients.length === 0?0: selectedIngreients.map((ingr)=>ingr.price).reduce((s,price)=>s+price),[selectedIngreients]);\r\n    \r\nreturn(\r\n    <div className={styles.main}>\r\n    <p className=\"mt-20 text text_type_digits-default\" >#{props.number}</p>\r\n    <p className=\"mb-6 mt-6  text text_type_main-medium\">{props.name}</p>\r\n    <p className={`mt-3 mb-6 text text_type_main-small ${props.status===\"done\"?styles.green:\"\"}`}>{props.status===\"done\"?\"готов\":props.status}</p>    \r\n    <p className=\"mb-6 mt-3  text text_type_main-default\">Состав:</p>\r\n    <OrderIngredientsList ingredients={props.ingredients} />\r\n    <div className={`${styles.horizontal} mt-6`}>\r\n    <p className=\"mb-6  text text_type_main-small text_color_inactive\">{dateToString(props.createdAt)}</p>\r\n    \r\n    <span className={styles.price_div}>\r\n          <p className=\"text text_type_digits-default mr-2 \">\r\n            {price}\r\n          </p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </span>\r\n        </div>\r\n    </div>\r\n)\r\n}\r\nexport default OrderDetailsExtended;","import styles from \"./order-details.module.css\";\r\nimport React from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport OrderDetailsExtended from \"../components/orders-info/order-details-extended/order-details-extended\";\r\nimport { useDispatch, useSelector } from \"../utils/hooks\";\r\nimport { Awaiter } from \"../components/awaiter/awaiter\";\r\nimport { getOrder } from \"../services/actions/order-details\";\r\nimport { setError, clearError } from \"../services/actions/error\";\r\nimport Modal from \"../components/modal/modal\";\r\n\r\nexport const OrderDetailsPage= ()=>{\r\n    let { id }:{id:string} = useParams();\r\n  const {getOrderRequest, getOrderFailed, order} = useSelector(store=>store.order);\r\n  const{error} = useSelector(store=>store.error);\r\n  const dispatch=useDispatch();\r\n  React.useEffect(()=>{\r\n     dispatch(getOrder(Number(id)));\r\n  },[dispatch,id]\r\n  )\r\n  React.useEffect(()=>{\r\n    \r\n    if(getOrderFailed ) dispatch(setError(\"Не удалось загрузить данные заказа\"));\r\n    if(getOrderRequest) dispatch(clearError());\r\n    \r\n },[dispatch,getOrderFailed,getOrderRequest]\r\n\r\n)\r\nreturn(  \r\n    <div className={styles.window}>\r\n    {order?\r\n    (<main className={styles.main}>\r\n      <section className={styles.section}>\r\n     {order && <OrderDetailsExtended {...order} ></OrderDetailsExtended>}\r\n        \r\n      </section>\r\n    </main>\r\n    ):\r\n    getOrderRequest?\r\n    (\r\n      <Awaiter/>\r\n    ):\r\n    (null)\r\n}\r\n{error && (\r\n          <Modal\r\n            header=\"Печалька :(\"\r\n            onClose={() => dispatch(clearError())}\r\n          >\r\n            <span className=\"text text_type_main-medium\">{`\"${error}\"`}</span>\r\n          </Modal>\r\n        )}\r\n  </div>\r\n)\r\n}\r\n","import React  from \"react\";\r\nimport {TOrderQuantity} from \"../../../utils/types\";\r\nconst OrdersReady:React.FC<TOrderQuantity>=(props)=>{\r\n    return(\r\n        <div className=\"mt-5\">\r\n            <p className=\"ml-2 text text_type_main-small\">{props.title}</p>\r\n            <div className=\"mt-5\"></div>\r\n            <p className=\"ml-2 text text_type_digits-medium\">{props.quantity}</p>\r\n        </div>\r\n\r\n    )\r\n}\r\nexport default OrdersReady","import React ,{useMemo} from \"react\";\r\nimport styles from \"./order-lists.module.css\";\r\nimport {TOrderLists} from \"../../../utils/types\";\r\nimport {splitArray} from \"../../../utils/utils\";\r\nconst OrderLists:React.FC<TOrderLists>=(props)=>{\r\n    \r\n    const readyOrders = useMemo(()=>{\r\n        return splitArray(props.ready,10);\r\n    },[props]);\r\n    return(\r\n        <div className={styles.main}>\r\n            <div className=\"mr-9\">\r\n            <p className=\"mb-6 ml-2 text text_type_main-medium\">Готовы:</p>\r\n            <div className={styles.number_container}>\r\n            {readyOrders && readyOrders.length > 0 && readyOrders.map((orders:number[], index:number ) => (\r\n\r\n                <div className=\"m-2\" key={index}>\r\n                    {orders.map((orderId:number, index2:number) => (\r\n                <p className={`text text_type_digits-small ${styles.green}`} key={index2} >{orderId}</p>\r\n                    ))\r\n                    }\r\n                  </div>\r\n                ))}\r\n            </div>\r\n            </div>\r\n            \r\n            <div>\r\n            <p className=\"mb-6 ml-2  text text_type_main-medium\" style={{ whiteSpace: 'nowrap' }}>В работе:</p>\r\n            {props.waiting && props.waiting.map((orderId:number, index:number) => (\r\n                <div className=\"m-2\" key={index}>\r\n                <p className=\"text text_type_digits-small\" >{orderId}</p>\r\n                  </div>\r\n                ))}\r\n            \r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\nexport default OrderLists","import styles from \"./feed.module.css\";\r\nimport { useSelector, useDispatch } from \"../utils/hooks\";\r\nimport React from \"react\";\r\nimport OrdersReady from \"../components/orders-info/orders-ready/orders-ready\";\r\nimport OrderLists from \"../components/orders-info/order-lists/order-lists\";\r\nimport OrderCard from \"../components/orders-info/order-card/order-card\";\r\nimport { closeConnection, startConnection } from \"../services/actions/ws\";\r\nimport { TOrder } from \"../utils/types\";\r\n\r\nexport const FeedPage=()=>{\r\n  const { orders,total, totalToday } = useSelector(store=>store.ws);\r\n  const dispatch = useDispatch();\r\n  React.useEffect(()=>{\r\n\r\n     dispatch(startConnection(\"\"));\r\nreturn ()=>{ dispatch(closeConnection())}\r\n  },[dispatch])\r\n\r\n  var readyOrders = orders.filter(ord=>ord.status===\"done\").map(ord=> ord.number);\r\n  var waitingOrders = orders.filter(ord=>ord.status===\"pending\"||ord.status===\"created\").map(ord=> ord.number);\r\n  \r\nreturn(\r\n    <>\r\n     <main className={styles.main}>\r\n    \r\n          <section className={`pl-9 mr-15 ${styles.section}`}>\r\n          <p className=\"mt-10 mb-5 text text_type_main-large\">Лента заказов</p>\r\n          <section className={styles.scrollable}>\r\n            {orders&& orders.map((order:TOrder, index:number)=>\r\n            <OrderCard {...order} key={index} ></OrderCard>\r\n            )}\r\n          </section>\r\n          </section>\r\n          <div className=\"ml-10\" />\r\n          <section className={`mt-20 ${styles.section}`}>\r\n          <OrderLists ready={readyOrders} waiting={waitingOrders}></OrderLists>\r\n    <OrdersReady title=\"выполнено за все время:\" quantity={total}></OrdersReady>\r\n    <OrdersReady title=\"выполнено за сегодня:\" quantity={totalToday}></OrdersReady>\r\n    \r\n          </section>\r\n    \r\n        \r\n      </main>\r\n    \r\n    </>\r\n);\r\n};","import {FC} from 'react';\r\nimport styles from './app-header.module.css';\r\ntype THeaderItemProps={\r\n    onClick:()=>void,\r\n    text:string\r\n}\r\nconst HeaderItem : FC<THeaderItemProps> =  (props)=>{     \r\n\r\n    return(<div className=\"pl-5 pr-5 pt-4\" onClick={props.onClick}>\r\n    <span className={styles.nav}>\r\n    {props.children}\r\n    <p className=\"ml-2 text text_type_main-default\">{props.text}</p>\r\n    </span>\r\n    </div>)\r\n}\r\nexport default HeaderItem","import React, { useCallback, useEffect } from \"react\";\r\nimport { Logo } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"./app-header.module.css\";\r\nimport HeaderItem from \"./app-header-item\";\r\nimport { useHistory, useLocation, Link } from \"react-router-dom\";\r\nimport {\r\n  BurgerIcon,\r\n  ListIcon,\r\n  ProfileIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport { HOME_PAGE } from \"../../utils/burger-constants\";\r\nfunction AppHeader() {\r\n  const history = useHistory();\r\n  const [currentPage, setCurrentPage] = React.useState(\"\");\r\n  const location = useLocation();\r\n  useEffect(() => {\r\n    const c=HOME_PAGE.split(\"/\").length;\r\n    if (location.pathname.split(\"/\").length > c)\r\n      setCurrentPage(location.pathname.split(\"/\")[c]);\r\n      \r\n  }, [location]);\r\n  const setConstructor = useCallback(() => {\r\n    setCurrentPage(\"constructor\");\r\n    history.replace({ pathname: `${HOME_PAGE}/` });\r\n  }, [history]);\r\n  const setOrders = useCallback(() => {\r\n    setCurrentPage(\"feed\");\r\n    history.replace({ pathname: `${HOME_PAGE}/feed` });\r\n  }, [history]);\r\n  const setProfile = useCallback(() => {\r\n    setCurrentPage(\"profile\");\r\n    history.replace({ pathname: `${HOME_PAGE}/profile` });\r\n  }, [history]);\r\n\r\n  return (\r\n    <header>\r\n      <nav className=\" p-4 \">\r\n        <div className={styles.header}>\r\n          <div className={styles.header}>\r\n            <HeaderItem\r\n              text=\"конструктор\"\r\n              onClick={setConstructor}\r\n           \r\n            >\r\n              <BurgerIcon\r\n                type={\r\n                  !currentPage || currentPage === \"constructor\"\r\n                    ? \"primary\"\r\n                    : \"secondary\"\r\n                }\r\n              />\r\n            </HeaderItem>\r\n            <HeaderItem\r\n              text=\"лента заказов\"\r\n              onClick={setOrders}\r\n           \r\n            >\r\n              <ListIcon\r\n                type={currentPage === \"feed\" ? \"primary\" : \"secondary\"}\r\n              />\r\n            </HeaderItem>\r\n          </div>\r\n          <Link to={`${HOME_PAGE}/`} className={styles.logo}>\r\n            <Logo />\r\n          </Link>\r\n          <HeaderItem\r\n            text=\"личный кабинет\"\r\n            onClick={setProfile}\r\n           \r\n          >\r\n            <ProfileIcon\r\n              type={currentPage === \"profile\" ? \"primary\" : \"secondary\"}\r\n            />\r\n          </HeaderItem>\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\nexport default AppHeader;\r\n","import { ProtectedRoute } from \"../protected-route/protected-route\";\r\nimport Modal from \"../modal/modal\";\r\nimport {\r\n  ConstructorPage,\r\n  LoginPage,\r\n  Code404Page,\r\n  RegisterPage,\r\n  ForgotPasswordPage,\r\n  ResetPasswordPage,\r\n  ProfilePage,\r\n  IngredientDetailsPage,\r\n  OrderDetailsPage,\r\n  FeedPage\r\n} from \"../../pages\";\r\nimport { Route, Switch, useLocation, useHistory } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport AppHeader from \"../app-header/app-header\";\r\nimport { clearCurrentIngredient } from \"../../services/actions/ingredient-details\";\r\nimport { TLocationState } from \"../../utils/types\";\r\nimport {HOME_PAGE} from \"../../utils/burger-constants\";\r\n\r\n\r\n\r\nconst ModalSwitch = () => {\r\n  const location = useLocation<TLocationState>();\r\n  const history = useHistory();\r\n  let background = location.state && location.state.background;\r\n  const dispatch = useDispatch();\r\n  const closeModal = () => {\r\n    dispatch( clearCurrentIngredient());\r\n\r\n    history.goBack();\r\n  };\r\n  return (\r\n    <>\r\n      <AppHeader />\r\n      <Switch location={background || location}>\r\n        <Route path={`${HOME_PAGE}/`} exact={true}>\r\n          <ConstructorPage />\r\n        </Route>\r\n        <Route path={`${HOME_PAGE}/constructor`} exact={true}>\r\n          <ConstructorPage />\r\n        </Route>\r\n        <Route path={`${HOME_PAGE}/ingredient/:id`}>\r\n          <IngredientDetailsPage />\r\n        </Route>\r\n        <Route path={`${HOME_PAGE}/login`} exact={true}>\r\n          <LoginPage />\r\n        </Route>\r\n        <Route path={`${HOME_PAGE}/register`} exact={true}>\r\n          <RegisterPage />\r\n        </Route>\r\n        <Route path={`${HOME_PAGE}/forgot-password`} exact={true}>\r\n          <ForgotPasswordPage />\r\n        </Route>\r\n        <Route path={`${HOME_PAGE}/reset-password`} exact={true}>\r\n          <ResetPasswordPage />\r\n        </Route>\r\n        <Route path={`${HOME_PAGE}/feed/:id`} exact={true}>\r\n          <OrderDetailsPage />\r\n        </Route>\r\n        <Route path={`${HOME_PAGE}/feed`} exact={true}>\r\n          <FeedPage />\r\n        </Route>\r\n        \r\n        <ProtectedRoute path={`${HOME_PAGE}/profile`} exact={true}>\r\n          <ProfilePage />\r\n        </ProtectedRoute>\r\n        \r\n        <ProtectedRoute path={`${HOME_PAGE}/exit`} exact={true}>\r\n          <ProfilePage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path={`${HOME_PAGE}/profile/orders`} exact={true}>\r\n          <ProfilePage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path={`${HOME_PAGE}/profile/orders/:id`} exact={true}>\r\n          <OrderDetailsPage />\r\n        </ProtectedRoute>\r\n\r\n        <Route>\r\n          <Code404Page />\r\n        </Route>\r\n      </Switch>\r\n      {background && (\r\n        <Route\r\n          path={`${HOME_PAGE}/ingredient/:id`}\r\n          children={\r\n            <Modal onClose={closeModal} header=\"Детали ингредиента\">\r\n              <IngredientDetailsPage />\r\n            </Modal>\r\n          }\r\n        />\r\n        \r\n      )}\r\n      {background && (\r\n        <Route\r\n          path={`${HOME_PAGE}/feed/:id`}\r\n          children={\r\n            <Modal onClose={closeModal} header=\"Детали заказа\">\r\n              <OrderDetailsPage />\r\n            </Modal>\r\n          }\r\n        />\r\n        \r\n      )}\r\n      {background && (\r\n        <Route\r\n          path={`${HOME_PAGE}/profile/orders/:id`}\r\n          children={\r\n            <Modal onClose={closeModal} header=\"Детали заказа\">\r\n              <OrderDetailsPage />\r\n            </Modal>\r\n          }\r\n        />\r\n        \r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport default ModalSwitch;\r\n","import React from \"react\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"../../utils/hooks\";\nimport { getUser } from \"../../services/actions/profile\";\nimport { getIngredients } from \"../../services/actions/ingredients\";\nimport ModalSwitch from \"../modal-switch/modal-switch\";\nfunction App() {\n  const {\n    user,\n    profileRequest,\n    profileRequestFailed,\n    setProfileRequest,\n    regRequest,\n    forgotPassRequest,\n    resetPassRequest,\n  } = useSelector((store) => store.profile );\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    if (\n      !user &&\n      !profileRequest &&\n      !profileRequestFailed &&\n      !setProfileRequest &&\n      !regRequest &&\n      !forgotPassRequest &&\n      !resetPassRequest\n    )\n      dispatch(getUser());\n  }, [\n    dispatch,\n    user,\n    profileRequest,\n    profileRequestFailed,\n    setProfileRequest,\n    regRequest,\n    forgotPassRequest,\n    resetPassRequest,\n  ]);\n  React.useEffect(() => {\n    dispatch(getIngredients());\n  }, [dispatch]);\n\n  return (\n    <Router>\n      <ModalSwitch />\n    </Router>\n  );\n}\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { TAddedIngredient } from \"../../utils/types\";\r\nimport {\r\n  ADD_INGREDIENT,\r\n  REMOVE_INGREDIENT,\r\n  MOVE_INGREDIENT,\r\n  CLEAR_INGREDIENTS,\r\n  TBurgerIngredientActions\r\n} from \"../actions/burger-constructor\";\r\nexport type TBurgerConstructorState={\r\n  burger : ReadonlyArray<TAddedIngredient>,\r\n  price : number\r\n}\r\nconst initialState:TBurgerConstructorState = {\r\n  burger: [],\r\n  price: 0,\r\n};\r\nexport const burgerConstructor = (state:TBurgerConstructorState = initialState, action:TBurgerIngredientActions):TBurgerConstructorState => {\r\n  switch (action.type) {\r\n    case CLEAR_INGREDIENTS:\r\n      return { ...initialState };\r\n    case ADD_INGREDIENT: //добавить ингредиент в бургер, если это булка и булка уже есть, то заменить\r\n      if (!action.item) return state;\r\n      let hasBun = state.burger\r\n        ? state.burger.filter((ingr) => ingr.type === \"top\").length > 0\r\n          ? 1\r\n          : 0\r\n        : 0;\r\n      let burgerIngredients = state.burger ? [...state.burger] : [];\r\n\r\n      if (action.item.type === \"bun\") {\r\n        //булка добавится два раза\r\n        burgerIngredients.splice(0, hasBun, {\r\n          _id: action.item._id,\r\n          type: \"top\",\r\n          isLocked: true,\r\n          text: action.item.name + \"(верх)\",\r\n          price: action.item.price,\r\n          thumbnail: action.item.image,\r\n          place: 0,\r\n        });\r\n        let placeOfBottomBun = burgerIngredients.length - hasBun;\r\n        burgerIngredients.splice(placeOfBottomBun, hasBun, {\r\n          _id: action.item._id,\r\n          type: \"bottom\",\r\n          isLocked: true,\r\n          text: action.item.name + \"(низ)\",\r\n          price: action.item.price,\r\n          thumbnail: action.item.image,\r\n          place: placeOfBottomBun,\r\n        });\r\n      } else {\r\n        //обычный ингредиент добавится один раз, если место указано неверно, то перед нижней булкой (если она есть)или просто в последнюю позицию\r\n\r\n        let place = burgerIngredients.length - hasBun// ингрединт добавится перед нижней булкой\r\n          \r\n        burgerIngredients.splice(place, 0, {\r\n          _id: action.item._id,\r\n          type: undefined,\r\n          isLocked: false,\r\n          text: action.item.name,\r\n          price: action.item.price,\r\n          thumbnail: action.item.image,\r\n          place: place,\r\n        });\r\n      }\r\n      let price =\r\n        burgerIngredients.length === 0\r\n          ? 0\r\n          : burgerIngredients\r\n              .map((ingr) => ingr.price)\r\n              .reduce((s, price) => s + price);\r\n      return { ...state, burger: burgerIngredients, price: price };\r\n    case REMOVE_INGREDIENT: //если бургер не пуст и ингредиент есть, то удалить. если есть два и более одинаковых ингредиентов, то удалить только нужный\r\n      if (\r\n        !state.burger ||\r\n        action.place < 0 ||\r\n        action.place > state.burger.length - 1\r\n      )\r\n        return state;\r\n      let newburger = [...state.burger];\r\n      newburger.splice(action.place, 1);\r\n\r\n      let newprice =\r\n        newburger.length === 0\r\n          ? 0\r\n          : newburger.map((ingr) => ingr.price).reduce((s, price) => s + price);\r\n      newburger.forEach((ingr, index) => (ingr.place = index));\r\n      return {\r\n        burger: newburger,\r\n        price: newprice,\r\n      };\r\n    case MOVE_INGREDIENT: //изменить порядок ингредиента, если он не совпадает с текущим.\r\n      if (!action.oldPlace || !action.newPlace) return { ...state };\r\n      if (\r\n        !state.burger ||\r\n        action.oldPlace < 1 ||\r\n        action.oldPlace > state.burger.length - 2\r\n      )\r\n        return { ...state };\r\n      let anewburger = [...state.burger];\r\n      let deleted = anewburger.splice(action.oldPlace, 1)[0];\r\n      anewburger.splice(action.newPlace, 0, deleted);\r\n      anewburger.forEach((ingr, index) => (ingr.place = index));\r\n      return {\r\n        ...state,\r\n        burger: anewburger,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { TIngredient } from \"../../utils/types\";\r\nimport {\r\n  GET_INGREDIENTS_REQUEST,\r\n  GET_INGREDIENTS_SUCCESS,\r\n  GET_INGREDIENTS_FAILED,\r\n  TIngredientActions\r\n} from \"../actions/ingredients\";\r\nexport type TIngredientsState={\r\n  ingredients:ReadonlyArray<TIngredient>,\r\n  ingredientsRequest:boolean,\r\n  ingredientsFailed:boolean\r\n}\r\nconst initialState:TIngredientsState = {\r\n  ingredients: [],\r\n  ingredientsRequest: false,\r\n  ingredientsFailed: false,\r\n};\r\nexport const ingredientsReducer = (state:TIngredientsState = initialState, action:TIngredientActions):TIngredientsState => {\r\n  switch (action.type) {\r\n    case GET_INGREDIENTS_REQUEST:\r\n      return { ...state, ingredientsRequest: true };\r\n    case GET_INGREDIENTS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        ingredientsFailed: false,\r\n        ingredients: action.ingredients,\r\n        ingredientsRequest: false,\r\n      };\r\n    case GET_INGREDIENTS_FAILED:\r\n      return {\r\n        ...state,\r\n        ingredientsFailed: true,\r\n        ingredients: initialState.ingredients,\r\n        ingredientsRequest: false,\r\n      };\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { SET_ERROR, CLEAR_ERROR, TErrorActions } from \"../actions/error\";\r\nexport type TErrorState = {\r\n  error:string\r\n}\r\nconst InitialState:TErrorState = {\r\n  error: \"\",\r\n};\r\nexport const errorReducer = (state:TErrorState = InitialState, action:TErrorActions):TErrorState => {\r\n  switch (action.type) {\r\n    case SET_ERROR:\r\n      return { ...state, error: action.error };\r\n    case CLEAR_ERROR:\r\n      return InitialState;\r\n    default:\r\n      return state ;\r\n  }\r\n};\r\n","import {\r\n  SUBMIT_ORDER_REQUEST,\r\n  SUBMIT_ORDER_SUCCESS,\r\n  SUBMIT_ORDER_FAILED,\r\n  RESET_ORDER,\r\n  GET_ORDER_REQUEST,\r\n  GET_ORDER_SUCCESS,\r\n  GET_ORDER_FAILED,\r\n  TOrderActions,\r\n} from \"../actions/order-details\";\r\nimport {TOrder} from \"../../utils/types\";\r\nexport type TOrderState = {\r\n  orderId: null|undefined|number,\r\n  submitOrderRequest: boolean,\r\n  submitOrderFailed: boolean,\r\n  getOrderRequest:boolean,\r\n  getOrderFailed:boolean,\r\n  order?:TOrder,\r\n};\r\nconst initialState:TOrderState = {\r\n  orderId: null,\r\n  submitOrderRequest: false,\r\n  submitOrderFailed: false,\r\n  getOrderRequest:false,\r\n  getOrderFailed:false,\r\n};\r\nexport const orderDetailsReducer = (state:TOrderState = initialState, action:TOrderActions):TOrderState => {\r\n  switch (action.type) {\r\n    case SUBMIT_ORDER_FAILED:\r\n      return {\r\n        ...initialState,\r\n        submitOrderFailed: true,\r\n      };\r\n    case SUBMIT_ORDER_REQUEST:\r\n      return {\r\n        ...initialState,\r\n        submitOrderRequest: true,\r\n      };\r\n    case SUBMIT_ORDER_SUCCESS:\r\n      return {\r\n        ...initialState,\r\n        orderId: action.order?.number,\r\n      };\r\n    case RESET_ORDER:\r\n      return { ...initialState };\r\n    case GET_ORDER_REQUEST:\r\n      return{\r\n        ...initialState,\r\n        getOrderRequest : true,\r\n      };\r\n    case GET_ORDER_FAILED:\r\n      return{\r\n        ...initialState,\r\n        getOrderFailed:true,\r\n      }\r\n    case GET_ORDER_SUCCESS:\r\n      return{\r\n        ...initialState,        \r\n        order:action.order,\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  SET_CURRENT_INGREDIENT,\r\n  CLEAR_CURRENT_INGREDIENT,\r\n  TCurrentIngredientActions\r\n} from \"../actions/ingredient-details\";\r\nexport type TCurrentIngredientState={\r\n  id:string|null|undefined\r\n}\r\nconst initialState:TCurrentIngredientState = {\r\n  id: null,\r\n};\r\nexport const ingredientDetailsReducer = (state:TCurrentIngredientState = initialState, action:TCurrentIngredientActions):TCurrentIngredientState => {\r\n  switch (action.type) {\r\n    case SET_CURRENT_INGREDIENT:\r\n      return { ...state, id: action.id };\r\n    case CLEAR_CURRENT_INGREDIENT:\r\n      return { ...initialState };\r\n    default:\r\n      return state ;\r\n  }\r\n};\r\n","import { TMenuTab } from \"../../utils/types\";\r\nimport { SET_TAB, SET_RATIO, TTabActions } from \"../actions/tab\";\r\n\r\nexport type TTabState = {\r\n  current: string,\r\n  tabs: ReadonlyArray<TMenuTab>\r\n};\r\nconst initialState:TTabState = {\r\n  current: \"bun\",\r\n  tabs: [\r\n    {\r\n      id: \"bun\",\r\n      title: \"Булки\",\r\n      ratio: 0,\r\n    },\r\n    {\r\n      id: \"sauce\",\r\n      title: \"Соусы\",\r\n      ratio: 0,\r\n    },\r\n    {\r\n      id: \"main\",\r\n      title: \"Начинки\",\r\n      ratio: 0,\r\n    },\r\n  ],\r\n};\r\nexport const tabReducer = (state:TTabState = initialState, action:TTabActions):TTabState => {\r\n  switch (action.type) {\r\n    case SET_TAB:\r\n      return {\r\n        ...state,\r\n        current: action.current,\r\n        tabs: state.tabs.map((t) =>\r\n          t.id === action.current ? { ...t, ratio: 1.1 } : t\r\n        ),\r\n      };\r\n    case SET_RATIO:\r\n      let newTabs = state.tabs.map((t) =>\r\n        t.id === action.id ? { ...t, ratio: action.ratio } : t\r\n      );\r\n      let newCurrent = newTabs.reduce((prev, next) => {\r\n        return  prev.ratio < next.ratio ? next : prev;\r\n      }, newTabs[0]).id;\r\n      return {\r\n        ...state,\r\n        tabs: newTabs,\r\n        current: newCurrent,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  REG_USER_REQUEST,\r\n  REG_USER_SUCCESS,\r\n  REG_USER_FAILED,\r\n  GET_USER_REQUEST,\r\n  GET_USER_FAILED,\r\n  GET_USER_SUCCESS,\r\n  SET_USER_REQUEST,\r\n  SET_USER_FAILED,\r\n  SET_USER_SUCCESS,\r\n  FORGOT_PASS_REQUEST,\r\n  FORGOT_PASS_FAILED,\r\n  FORGOT_PASS_SUCCESS,\r\n  RESET_PASS_REQUEST,\r\n  RESET_PASS_FAILED,\r\n  RESET_PASS_SUCCESS,\r\n  TProfileActions\r\n} from \"../actions/profile\";\r\nimport { LOGIN_SUCCESS, LOGOUT_SUCCESS, TLoginActions } from \"../actions/login\";\r\nimport { TUser } from \"../../utils/types\";\r\nexport type TProfileState = {\r\n  user: null|undefined|TUser,\r\n  passwordResetRequired: boolean,\r\n  passwordReseted: boolean,\r\n  message: null|undefined|string,\r\n  profileRequest: boolean,\r\n  profileRequestFailed: boolean,\r\n  setProfileRequest: boolean,\r\n  setProfileRequestFailed: boolean,\r\n  regRequest: boolean,\r\n  regRequestFailed: boolean,\r\n  resetPassRequest: boolean,\r\n  resetPassRequestFailed: boolean,\r\n  forgotPassRequest: boolean,\r\n  forgotPassRequestFailed: boolean,\r\n};\r\nconst initialState:TProfileState = {\r\n  user: null,\r\n  passwordResetRequired: false,\r\n  passwordReseted: false,\r\n  message: \"\",\r\n  profileRequest: false,\r\n  profileRequestFailed: false,\r\n  setProfileRequest: false,\r\n  setProfileRequestFailed: false,\r\n  regRequest: false,\r\n  regRequestFailed: false,\r\n  resetPassRequest: false,\r\n  resetPassRequestFailed: false,\r\n  forgotPassRequest: false,\r\n  forgotPassRequestFailed: false,\r\n};\r\nexport const profileReducer = (state:TProfileState = initialState, action:TProfileActions|TLoginActions):TProfileState => {\r\n  switch (action.type) {\r\n    case LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: {\r\n          name: action.user.name,\r\n          email: action.user.email,\r\n        },\r\n      };\r\n    case LOGOUT_SUCCESS:\r\n      return {\r\n        ...initialState,\r\n      };\r\n    case REG_USER_FAILED:\r\n      return {\r\n        ...initialState,\r\n        regRequestFailed: true,\r\n      };\r\n    case REG_USER_REQUEST:\r\n      return {\r\n        ...initialState,\r\n        regRequest: true,\r\n      };\r\n    case REG_USER_SUCCESS:\r\n      return {\r\n        ...initialState,\r\n        regRequest: false,\r\n        regRequestFailed: false,        \r\n        user: action.user?{\r\n          name: action.user?.name,\r\n          email: action.user?.email,\r\n        }:null,\r\n      };\r\n    case GET_USER_REQUEST:\r\n      return {\r\n        ...initialState,\r\n        profileRequest: true,\r\n      };\r\n    case GET_USER_SUCCESS:\r\n      return {\r\n        ...initialState,\r\n        user: action.user?{\r\n          name: action.user?.name,\r\n          email: action.user?.email,\r\n        }:null,\r\n        profileRequest: false,\r\n        profileRequestFailed: false,\r\n      };\r\n    case GET_USER_FAILED:\r\n      return {\r\n        ...initialState,\r\n        profileRequestFailed: true,\r\n      };\r\n    case SET_USER_FAILED:\r\n      return {\r\n        ...state,\r\n        setProfileRequestFailed: true,\r\n        setProfileRequest: false,\r\n      };\r\n    case SET_USER_REQUEST:\r\n      return {\r\n        ...state,\r\n        setProfileRequest: true,\r\n        setProfileRequestFailed: false,\r\n      };\r\n    case SET_USER_SUCCESS:\r\n      return {\r\n        ...initialState,\r\n        user: action.user?{\r\n          name: action.user?.name,\r\n          email: action.user?.email,\r\n        }:null,\r\n        setProfileRequest: false,\r\n        setProfileRequestFailed: false,\r\n      };\r\n    case FORGOT_PASS_REQUEST:\r\n      return {\r\n        ...state,\r\n        message: \"\",\r\n        passwordResetRequired: true,\r\n        profileRequest: true,\r\n        profileRequestFailed: false,\r\n      };\r\n    case FORGOT_PASS_FAILED:\r\n      return {\r\n        ...state,\r\n        message: action.message,\r\n        passwordResetRequired: false,\r\n        profileRequest: false,\r\n        profileRequestFailed: true,\r\n      };\r\n    case FORGOT_PASS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        message: action.message,\r\n        passwordResetRequired: true,\r\n        profileRequest: false,\r\n        profileRequestFailed: false,\r\n      };\r\n    case RESET_PASS_REQUEST:\r\n      return {\r\n        ...state,\r\n        passwordResetRequired: true,\r\n        passwordReseted: false,\r\n        profileRequest: true,\r\n        profileRequestFailed: false,\r\n      };\r\n    case RESET_PASS_FAILED:\r\n      return {\r\n        ...state,\r\n        message: action.message,\r\n        passwordResetRequired: false,\r\n        passwordReseted: false,\r\n        profileRequest: false,\r\n        profileRequestFailed: true,\r\n      };\r\n    case RESET_PASS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        message: action.message,\r\n        passwordResetRequired: false,\r\n        passwordReseted: true,\r\n        profileRequest: false,\r\n        profileRequestFailed: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAILED,\r\n  LOGOUT_REQUEST,\r\n  LOGOUT_SUCCESS,\r\n  LOGOUT_FAILED,\r\n  TLoginActions\r\n} from \"../actions/login\";\r\nexport type TLoginState={\r\n  loginRequest: boolean,\r\n  loginRequestFailed: boolean,\r\n  logoutRequest: boolean,\r\n  logoutRequestFailed: boolean,\r\n  loggedIn?:boolean\r\n}\r\nconst initialState:TLoginState = {\r\n  loginRequest: false,\r\n  loginRequestFailed: false,\r\n  logoutRequest: false,\r\n  logoutRequestFailed: false,\r\n  loggedIn: false\r\n};\r\n\r\nexport const loginReducer = (state:TLoginState = initialState, action:TLoginActions):TLoginState => {\r\n  switch (action.type) {\r\n    case LOGIN_FAILED:\r\n      return {\r\n        ...initialState,\r\n        loginRequestFailed: true,\r\n      };\r\n    case LOGIN_REQUEST:\r\n      return {\r\n        ...initialState,\r\n        loginRequest: true,\r\n      };\r\n    case LOGIN_SUCCESS:\r\n      return {\r\n        ...initialState,\r\n        loggedIn: true,\r\n      };\r\n    case LOGOUT_REQUEST:\r\n      return {\r\n        ...initialState,\r\n        logoutRequest: true,\r\n      };\r\n    case LOGOUT_FAILED:\r\n      return {\r\n        ...state,\r\n        logoutRequestFailed: true,\r\n      };\r\n    case LOGOUT_SUCCESS:\r\n      return {\r\n        ...initialState,\r\n        loggedIn: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { TWSActions, \r\n    WS_CONNECTION_CLOSED, \r\n    WS_CONNECTION_ERROR,\r\n    WS_CONNECTION_START,\r\n    WS_CONNECTION_SUCCESS,\r\n    WS_CLOSE_CONNECTION, \r\n    WS_GET_MESSAGE \r\n    } from \"../actions/ws\";\r\n    import { TOrder } from \"../../utils/types\";\r\n    export type TWSState = {\r\n        orders: ReadonlyArray<TOrder>,\r\n        total: number,\r\n        totalToday: number,\r\n        isConnected:boolean,\r\n        errorText?:string\r\n      }\r\n    const initialState:TWSState = {\r\n        orders:[],\r\n        total:0,\r\n        totalToday:0,\r\n        isConnected:false,\r\n        errorText:\"\"\r\n    }\r\nexport const wSReducer = (state:TWSState = initialState, action:TWSActions):TWSState => {\r\n    switch (action.type) {\r\n        case WS_CONNECTION_START:\r\n            return {\r\n                ...initialState,\r\n            }\r\n        case WS_CONNECTION_ERROR:\r\n            return{\r\n                ...state,\r\n                errorText:action.payload?.timeStamp.toString()\r\n            }\r\n        case WS_CONNECTION_CLOSED:\r\n            return{\r\n                ...initialState,\r\n                isConnected: false\r\n            }\r\n        case WS_CONNECTION_SUCCESS:\r\n            return{\r\n                ...state,\r\n                isConnected:true,\r\n                errorText:\"\",\r\n            }\r\n        case WS_GET_MESSAGE:\r\n            return{\r\n                ...state,\r\n                orders: action.payload.orders,\r\n                total:action.payload.total,\r\n                totalToday:action.payload.totalToday\r\n            }  \r\n        case WS_CLOSE_CONNECTION:\r\n            return{\r\n                ...state\r\n            }      \r\n        default: return state;\r\n    }\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport { burgerConstructor } from \"./burger-constructor\";\r\nimport { ingredientsReducer } from \"./ingredients\";\r\nimport { errorReducer } from \"./error\";\r\nimport { orderDetailsReducer } from \"./order-details\";\r\nimport { ingredientDetailsReducer } from \"./ingredient-details\";\r\nimport { tabReducer } from \"./tab\";\r\nimport { profileReducer } from \"./profile\";\r\nimport { loginReducer } from \"./login\";\r\nimport { wSReducer } from \"./ws\";\r\nexport const rootReducer = combineReducers({\r\n  constructor: burgerConstructor,\r\n  ingredients: ingredientsReducer,\r\n  error: errorReducer,\r\n  order: orderDetailsReducer,\r\n  currentIngredient: ingredientDetailsReducer,\r\n  tab: tabReducer,\r\n  profile: profileReducer,\r\n  login: loginReducer,\r\n  ws:wSReducer\r\n});\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport thunk from \"redux-thunk\";\r\nimport { rootReducer } from \"./reducers\";\r\nimport {socketMiddleware} from \"./middleware\"\r\n\r\nconst enhancer = composeWithDevTools(applyMiddleware(thunk, socketMiddleware()));\r\n\r\nexport const store = createStore(rootReducer, enhancer);\r\n","import  { Middleware, MiddlewareAPI } from 'redux';\r\nimport  { AppDispatch, RootState } from \"../../utils/types\";\r\nimport  { WS_CONNECTION_START, connectionError, connectionStarted, getMessage, connectionClosed, WS_CLOSE_CONNECTION } from \"../actions/ws\";\r\nimport { TWSActions } from '../actions/ws';\r\n\r\nexport const socketMiddleware = (): Middleware => {\r\n    return ((store: MiddlewareAPI<AppDispatch, RootState>) => {\r\n        let socket: WebSocket | null = null;\r\n        return next => (action: TWSActions) => {\r\n            const { dispatch } = store;\r\n            const { type } = action;\r\n            if (type === WS_CONNECTION_START) {\r\n                socket = new WebSocket(action.payload);\r\n            }\r\n            if (socket) {\r\n                \r\n                if(type === WS_CLOSE_CONNECTION){\r\n                socket.close();   \r\n                }\r\n                socket.onopen = event => {\r\n                dispatch(connectionStarted());\r\n                };\r\n                socket.onerror = event => {\r\n                dispatch(connectionError(event));\r\n                };\r\n                socket.onmessage = event => {\r\n                const { data } = event;\r\n                dispatch(getMessage(data));\r\n                };\r\n                socket.onclose = event => {\r\n                dispatch(connectionClosed());\r\n                };\r\n\r\n            }\r\n            next(action);\r\n        };\r\n        }) as Middleware;\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/app/app\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { Provider } from \"react-redux\";\nimport {store} from \"./services/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile-data_main__3nG0s\",\"item\":\"profile-data_item__3rWNy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details_part\":\"ingredient-details_details_part__hySgI\",\"details\":\"ingredient-details_details__35cHU\",\"details_card\":\"ingredient-details_details_card__36lXw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__2zcNC\",\"logo\":\"app-header_logo__3AJql\",\"left\":\"app-header_left__3dZS5\",\"right\":\"app-header_right__3MOxo\",\"nav\":\"app-header_nav__1EXMX\",\"nav_item_right\":\"app-header_nav_item_right__Xr1Od\",\"nav_item_left\":\"app-header_nav_item_left__38NMr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient_card\":\"burger-ingredient-card_ingredient_card__2u_p3\",\"price_div\":\"burger-ingredient-card_price_div__7zu-r\",\"item_center\":\"burger-ingredient-card_item_center__1SZ_M\",\"img\":\"burger-ingredient-card_img__2a9VV\",\"link\":\"burger-ingredient-card_link__3DUyB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"reset-password_main__2UUlY\",\"inner\":\"reset-password_inner__13KKh\",\"item\":\"reset-password_item__ZML6Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"forgot-password_main__2HkJN\",\"inner\":\"forgot-password_inner__2RP7L\",\"item\":\"forgot-password_item__G1oIz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"ingredient-row_main__acLUi\",\"img_container\":\"ingredient-row_img_container__3lrUa\",\"item\":\"ingredient-row_item__2fUzL\",\"price_div\":\"ingredient-row_price_div__207ES\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"order-card_card__1I3lq\",\"row\":\"order-card_row__jhw4f\",\"green\":\"order-card_green__3TIuM\",\"link\":\"order-card_link__2bg_w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"price_div\":\"order-details-extended_price_div__CkJpO\",\"horizontal\":\"order-details-extended_horizontal__3SWR8\",\"main\":\"order-details-extended_main__3ZhSm\",\"green\":\"order-details-extended_green__1gW9b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"order-ingredients-list_item__3Qab6\",\"container\":\"order-ingredients-list_container__qN90G\",\"price_div\":\"order-ingredients-list_price_div__3u3cM\",\"scrollable\":\"order-ingredients-list_scrollable__3IzTz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"feed_main__1MEbm\",\"section\":\"feed_section__38jAE\",\"scrollable\":\"feed_scrollable__1we-8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__27Xl8\",\"header\":\"modal_header__1mi-K\",\"img\":\"modal_img__3zdFh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"constructor_main__eymxx\",\"section\":\"constructor_section__1-hjf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"page404_main__1Quz9\",\"section\":\"page404_section__2vo_l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-details_main__x__0q\",\"section\":\"order-details_section__39Qou\",\"window\":\"order-details_window__1FzcZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-lists_main__1mqMU\",\"number_container\":\"order-lists_number_container__1_bSK\",\"green\":\"order-lists_green__1knCf\",\"no_wrap\":\"order-lists_no_wrap__1yEED\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burger\":\"burger-constructor_burger__dcbuK\",\"scrollable\":\"burger-constructor_scrollable__3WQde\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"awaiter_main__2sm6q\",\"inner\":\"awaiter_inner__1MKse\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"ingredient-details_main__2fbBN\",\"section\":\"ingredient-details_section__3pqDP\"};"],"sourceRoot":""}